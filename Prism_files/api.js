(function e$$0(m,n,e){function h(f,d){if(!n[f]){if(!m[f]){var c="function"==typeof require&&require;if(!d&&c)return c(f,!0);if(l)return l(f,!0);throw Error("Cannot find module '"+f+"'");}c=n[f]={exports:{}};m[f][0].call(c.exports,function(b){var a=m[f][1][b];return h(a?a:b)},c,c.exports,e$$0,m,n,e)}return n[f].exports}for(var l="function"==typeof require&&require,k=0;k<e.length;k++)h(e[k]);return h})({1:[function(g,m,n){m=g("./includes/clay");g("./includes/load");m.constants=g("./includes/adsonly");
m.callbacks=g("./includes/callbacks");m.constants=g("./includes/constants");m.dependencies=g("./includes/dependencies");m.events=g("./includes/events");m.offline=g("./includes/offline");m.Game=g("./features/game");m.Achievement=g("./features/achievement");m.Advertisement=g("./features/advertisement");m.Bar=g("./features/bar");m.Environment=g("./features/environment");m.Facebook=g("./features/facebook");m.Game=g("./features/game");m.GameManager=g("./features/gamemanager");m.Google=g("./features/google");
m.Kik=g("./features/kik");m.BBM=g("./features/bbm");m.Leaderboard=g("./features/leaderboard");m.Links=g("./features/links");m.Messages=g("./features/messages");m.Payment=g("./features/payment");m.Ratings=g("./features/ratings");m.Rooms=g("./features/rooms");m.Screenshot=g("./features/screenshot");m.Social=g("./features/social");m.Stats=g("./features/stats");m.Stream=g("./features/stream");m.Twitter=g("./features/twitter");m.UI=g("./features/ui");m.Player=g("./features/player")},{"./features/achievement":2,
"./features/advertisement":3,"./features/bar":4,"./features/bbm":5,"./features/environment":6,"./features/facebook":7,"./features/game":8,"./features/gamemanager":9,"./features/google":10,"./features/kik":11,"./features/leaderboard":12,"./features/links":13,"./features/messages":14,"./features/payment":15,"./features/player":16,"./features/ratings":17,"./features/rooms":18,"./features/screenshot":19,"./features/social":20,"./features/stats":21,"./features/stream":22,"./features/twitter":23,"./features/ui":24,
"./includes/adsonly":25,"./includes/callbacks":26,"./includes/clay":28,"./includes/constants":30,"./includes/dependencies":31,"./includes/events":32,"./includes/load":33,"./includes/offline":35}],2:[function(g,m,n){(function(){var e,h,l,k,f,d,c,b;k=g("../includes/clay");c=g("../features/player");f=g("../includes/events");d=g("../includes/offline");h=g("../includes/callbacks");b=g("../features/ui");l=g("../includes/cheatprevention");e=function(){function a(a){this.options=a;"object"!==typeof this.options&&
(k.log("This form of passing achievement ID is deprecated"),this.options={id:this.options});this.instanceId=Math.random();d.offline||f.socketListen("achievement",this,!1,!1)}a.achievementsAwarded={};a.achievementObjs={};a.prototype.award=function(b){var c;if(!l.validCall())return"Achievement awarded!";c=this.options.id||this.options.jwt;if(!a.achievementsAwarded[c])return b=h.add(b),a.achievementsAwarded[c]=!0,d.offline?(k.log("Achievement earned offline"),c={title:"Test",description:"Description"},
this.show(c,b),d.save("achievement","award",this.options.id,this.options,!0)):f.socketEmit("achievement","award",this.options,this.instanceId,b)};a.prototype.show=function(a,d){var f;f=window.location!==window.parent.location?document.referrer:document.location.href;a.success&&(~f.indexOf(k.DOMAIN)||a.showExternally)&&!a.hideUI&&("clay"!==c.clearance&&(a.description+="<br /><a href='javascript: void( 0 );' onclick='Clay.player.login();'>Login</a> to claim"),b.createNotification({title:a.title,html:a.description,
icon:a.icon,type:"achievement"}));return h.execute(d,[a])};a.showAll=function(a,b){var c;null==b&&(b=!1);b&&(c=h.add(b));return f.socketEmit("achievement","showAll",a,null,c)};a.fetchAll=function(a,b){null==a&&(a={});null==b&&(b=!1);a.fetch=!0;return this.showAll(a,b)};a.showAllCallback=function(a,c){var d,f,p,e,A,k;null==c&&(c=!1);p=[];f=a.data;e=0;if(f&&f.length)for(A=0,k=f.length;A<k;A++)d=f[A],e%2||p.push("<div class='clay-achievement-row'>"),p.push("<div class='clay-achievement-single"),d.icon&&
p.push(" clay-achievement-with-icon"),d.earned&&p.push(" clay-achievement-single-achieved' title='You&#39;ve earned this achievement!'"),d.earned||p.push("' title='You haven&#39;t earned this achievement yet.'"),p.push(">"),p.push("<div class='clay-achievement-single-inner'>"),d.earned?(p.push("<div class='clay-checkmark-before'"),d.icon&&p.push(" style='background-image: url( "+d.icon+" );'"),p.push("></div><div class='clay-checkmark'></div><div class='clay-checkmark-after'></div>")):(p.push("<div class='clay-xmark-before'"),
d.icon&&p.push(" style='background-image: url( "+d.icon+" );'"),p.push("></div><div class='clay-xmark'></div><div class='clay-xmark-after'>&times;</div>")),p.push(d.title),p.push(" <span class='clay-achievement-points' title='"+d.points+" points'>("+d.points+")</span>"),p.push("<div class='clay-achievement-single-description'>"+d.description+"</div>"),p.push("</div>"),p.push("</div>"),e%2&&p.push("</div>"),e++;else p.push("This game does not have any achievements!");d={title:"Achievements",html:p,
id:"clay-achievements-wrapper"};a.DOMid&&(d.DOMid=a.DOMid);return b.createModal(d,function(){var b;if(b=document.querySelector(".clay-achievement-single-description"))b.style.width="100%";if(c)return h.execute(c,[a])})};a.fetchAllCallback=function(a,b){null==b&&(b=!1);if(b)return h.execute(b,[a])};return a}();k.readyFunctions.push(function(){return f.socketListen("achievement",e,!1,!1)});m.exports=e}).call(this)},{"../features/player":16,"../features/ui":24,"../includes/callbacks":26,"../includes/cheatprevention":27,
"../includes/clay":28,"../includes/events":32,"../includes/offline":35}],3:[function(g,m,n){(function(){var e,h,l,k,f,d,c;d=g("../includes/local");h=g("../includes/clay");k=g("../includes/events");l=g("../features/environment");f=g("../features/game");c=g("../features/ui");e=function(){function b(a){this.options=null!=a?a:{};a=!1;this.device=l.type;"desktop"===this.options.devices&&"mobile"===this.device?a=!0:"mobile"===this.options.devices&&"desktop"===this.device&&(a=!0);this.options.position&&
this.options.position.parent&&"string"===typeof this.options.position.parent&&(this.options.position.parent=document.getElementById(this.options.position.parent));a||(this.checkFormat(),"preroll"===this.options.size||"preroll-video"===this.options.size?this.loadPrerollAd():this.loadStandardAd(),this.visible=!0)}b.prototype.visible=!1;b.prototype.skippable=!1;b.prototype.innerAd=null;b.prototype.loadPrerollAd=function(){var a,d,q=this;if("kik"===l.platform)return!1;"undefined"===typeof this.options.duration&&
(this.options.duration=15E3);a=[];a.push("<div class='clay-preroller-wrapper' id='clay-preroller-wrapper'>");d="mobile"===this.device?"wall":"preroll-video"===this.options.size?"video":"300x250";a.push("\t<div class='clay-preroller"+("wall"===d||"video"===d?"-full":"")+"'>");a.push("\t\t<h4>Advertisement</h4>");a.push("\t\t<div class='clay-preroller-content' id='clay-preroller-content'>\t");a.push("\t\t</div>");a.push("\t\t<div class='clay-load-bar' id='clay-load-bar'>");a.push("\t\t\t<div class='clay-load-bar-progress' id='clay-load-bar-progress'></div>");
a.push("\t\t\t<div class='clay-load-bar-text' id='clay-load-bar-text'>Loading "+(f.data&&f.data.name?f.data.name:h.gameKey)+"...</div>");a.push("\t\t</div>");a.push("\t</div>");a.push("</div>");return c.addToContainer(a,function(){q.innerAd=new b({size:d,position:{inline:!0,parent:document.getElementById("clay-preroller-content")}});return q.startLoadBar(q.options.duration)})};b.prototype.loadProgress=0;b.prototype.timePass=0;b.prototype.startLoadBar=function(a){var b,c=this;this.loadBar=document.getElementById("clay-load-bar-progress");
if(this.options.duration)return b=(new Date).getTime(),this.loaderInterval=setInterval(function(){var d;d=(new Date).getTime();c.timePassed=d-b;c.loadProgress=d=c.timePassed/a*100;c.updateLoadBar();100<=d&&(clearInterval(c.loaderInterval),c.loadProgress=100,c.hidePreroll());if(c.timePassed>=c.options.skipDuration&&!c.skippable)return c.startSkip()},100)};b.prototype.updateLoadBar=function(){if(this.loadBar)return this.loadBar.style.width=this.loadProgress+"%"};b.prototype.hidePreroll=function(){c.removeElement("clay-preroller-wrapper");
this.loaderInterval&&clearInterval(this.loaderInterval);if(this.options.onHide)return this.options.onHide()};b.prototype.done=function(){!0===this.options.allowSkip&&!1!==this.options.duration?this.startSkip():this.hidePreroll();return this};b.prototype.startSkip=function(){var a,b,c=this;if(a=document.getElementById("clay-load-bar-text"))if(a.innerHTML="",b=document.createElement("a"),b.href="#",b.onclick=function(a){a.preventDefault();return c.hidePreroll()},b.appendChild(document.createTextNode("Skip")),
a.appendChild(b),this.skippable=!0,this.options.onSkipStart)return this.options.onSkipStart()};b.prototype.loadStandardAd=function(){var a,b,c,f=this;"localhost"!==document.location.hostname&&"127.0.0.1"!==document.location.hostname||"cross-promotion-bar"===this.options.size?(a=document.createElement("iframe"),a.className="clay-ad",a.src="cross-promotion-bar"===this.options.size?h.BASEURL+"/api/bar?key="+h.gameKey:h.BASEURL+"/api/ad?key="+h.gameKey+"&size="+this.options.size+"&pub="+h.publisherID,
a.frameBorder=0):(a=document.createElement("div"),a.style.background="#000",a.style.padding="10px",a.style.boxSizing="border-box",b=document.createTextNode("Ads do not show on localhost"),a.appendChild(b));"cross-promotion-bar"===this.options.size?("mobile"===this.device?(c="320px",b="50px"):this.options.position?(c=this.options.position.width,b=this.options.position.height):(c="100%",b="80px"),this.size=[parseInt(c),parseInt(b)],a.style.width=c,a.style.height=b,a.src+="&height="+b+"&width="+c):"video"===
this.options.size||"wall"===this.options.size?(this.size=["100%","100%"],a.style.width=this.size[0],a.style.height=this.size[1]):(this.size=this.options.size.split("x"),a.style.width=this.size[0]+"px",a.style.height=this.size[1]+"px");a.style.overflow="hidden";"undefined"!==typeof this.options.show&&!1===this.options.show&&(a.style.display="none");this.frame=a;this.options.position&&this.options.position.inline?this.options.position.parent.appendChild(a):(a.style.position="absolute",a.style.zIndex=
9999,this.options.position?this.setPosition(this.options.position):(a.style.top=0,a.style.left=0),this.updatePosition(),k.addEvent("resize",function(){return f.updatePosition()}),d.container&&d.container.appendChild(a));if(this.options.refreshInterval)return this.refreshInterval=setInterval(function(){return f.refresh()},1E3*this.options.refreshInterval)};b.prototype.setRefreshInterval=function(a){var b=this;clearInterval(this.refreshInterval);this.refreshInterval=setInterval(function(){return b.refresh()},
1E3*a);return this};b.prototype.parsePosition=function(){var a,b,c,d,f,p,e,A,k;c={};(d=this.options).position||(d.position=[]);d=["top","left","right","bottom"];f="top left right bottom webkitTransform mozTransform msTransform".split(" ");b={top:0,left:0,right:0,bottom:0};this.options.position.parent&&(b=this.getOffset(this.options.position.parent),b={top:b.top,left:b.left,right:document.body.clientWidth-b.left,bottom:document.body.clientHeight-b.top});A=0;for(k=f.length;A<k;A++)if(p=f[A],a=this.options.position[p],
"undefined"!==typeof a&&-1!==d.indexOf(p)){"string"===typeof a&&-1!==a.indexOf("%")&&this.options.position.parent&&(a="left"===p||"right"===p?parseInt(a)/100*this.options.position.parent.offsetWidth:parseInt(a)/100*this.options.position.parent.offsetHeight,a=parseInt(a));if("string"!==typeof a||-1===a.indexOf("%")&&-1===a.indexOf("px"))a+=b[p],a+="px";c[p]=a;"center"===this.options.position.reference&&(e=this.options.position.scaleWidth||this.size[0],a=this.options.position.scaleHeight||this.size[1],
"left"===p?c["margin-left"]=-1*e/2+"px":"right"===p?c["margin-right"]=-1*e/2+"px":"top"===p?c["margin-top"]=-1*a/2+"px":"bottom"===p&&(c["margin-bottom"]=-1*a/2+"px"))}if(this.options.position.scaleWidth||this.options.position.scaleHeight)f=this.options.position.scaleWidth?this.options.position.scaleWidth/this.size[0]:1,d=this.options.position.scaleHeight?this.options.position.scaleHeight/this.size[1]:1,d="scale( "+f+", "+d+" )",c["-webkit-transform"]=d,c["-moz-transform"]=d,c["-ms-transform"]=d,
c.transform=d,c["-webkit-transform-origin"]="0 0",c["-moz-transform"]="0 0",c["-ms-transform"]="0 0",c.transform="0 0";return c};b.prototype.getOffset=function(a){var b,c;for(c=b=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{top:c,left:b}};b.validFormats="160x600 728x90 300x250 120x600 200x200 468x60 125x125 320x50 preroll preroll-video cross-promotion-bar video wall".split(" ");b.prototype.checkFormat=function(){var a;(a=this.options).size||
(a.size="");this.options.size=this.options.size.toLowerCase();-1===b.validFormats.indexOf(this.options.size)&&(this.options.size=b.validFormats[0]);return this.options.size};b.prototype.show=function(){this.visible=!0;"preroll"===this.options.size||"preroll-video"===this.options.size?h.log("Advertisement.show() is not a valid method for preroll advertisements. Prerolls are shown automatically on creation."):this.frame&&(this.frame.style.display="block");return this};b.prototype.hide=function(){this.visible=
!1;"preroll"===this.options.size||"preroll-video"===this.options.size?this.done():this.frame&&(this.frame.style.display="none");return this};b.prototype.remove=function(){this.visible=!1;"preroll"===this.options.size||"preroll-video"===this.options.size?this.done():(this.frame&&c.removeElement(this.frame),clearInterval(this.refreshInterval));return this};b.prototype.lastRefresh=0;b.prototype.refresh=function(){var a;a=(new Date).getTime();this.frame.parentNode||clearInterval(this.refreshInterval);
this.visible&&3E4<a-this.lastRefresh&&(this.frame&&(this.frame.src=this.frame.src),this.lastRefresh=a);return this};b.prototype.setProgress=function(a){this.loadProgress=100*a;this.updateLoadBar();return this};b.prototype.getDurationRemaining=function(a){null==a&&(a="load");if("load"===a)return a=this.options.duration-this.timePassed,0<a?a:0;if("skip"===a)return a=this.options.skipDuration-this.timePassed,0<a?a:0};b.prototype.setPosition=function(a){var b,c;for(b in a)c=a[b],this.options.position[b]=
c;a&&a.parent&&(this.options.position.parent=a.parent);"undefined"===typeof this.options.position.top&&"undefined"===this.options.position.right&&"undefined"===this.options.position.bottom&&"undefined"===this.options.position.left&&(this.options.position.top=0,this.options.position.left=0);this.updatePosition();return this};b.prototype.updatePosition=function(){var a,b,c,d;if(this.frame){b=this.parsePosition();d=[];for(a in b)c=b[a],d.push(this.frame.style.setProperty(a,c));return d}};return b}();
m.exports=e}).call(this)},{"../features/environment":6,"../features/game":8,"../features/ui":24,"../includes/clay":28,"../includes/events":32,"../includes/local":34}],4:[function(g,m,n){(function(){var e,h,l,k={}.hasOwnProperty,f=function(d,c){function b(){this.constructor=d}for(var a in c)k.call(c,a)&&(d[a]=c[a]);b.prototype=c.prototype;d.prototype=new b;d.__super__=c.prototype;return d};g("../includes/local");h=g("../includes/clay");g("../includes/events");g("../features/environment");g("../features/game");
l=g("../features/ui");e=function(d){function c(b,a){var d,f;null==b&&(b={});b.size="cross-promotion-bar";b.position||(b.position={});(d=b.position).width||(d.width="100%");(f=b.position).height||(f.height="80px");b.position.parent&&!1!==b.position.inline&&(b.position.inline=!0);c.__super__.constructor.call(this,b)}f(c,d);return c}(g("../features/advertisement"));h.Suggestions=function(){return function(d,c){var b;null==d&&(d={});b={title:"More Games",html:"",id:"clay-suggestions-wrapper"};d.DOMid&&
(b.DOMid=d.DOMid);l.createModal(b,function(){d={position:{width:"300px",height:"300px",left:"50%",top:"50%",reference:"center",parent:"clay-suggestions-wrapper-content-inner"}};return new e(d)})}}();m.exports=e}).call(this)},{"../features/advertisement":3,"../features/environment":6,"../features/game":8,"../features/ui":24,"../includes/clay":28,"../includes/events":32,"../includes/local":34}],5:[function(g,m,n){(function(){var e,h,l;l=g("../features/player");h=g("../includes/events");e=function(){function e(){}
e.linked=!1;e.post=function(f,d){null==f&&(f={});return blackberry.invoke.invoke({target:"sys.bbm.sharehandler",action:"bb.action.SHARE",data:f.message,mimeType:"text/plain"})};e.connect=function(f,d){var c;null==f&&(f={});null==d&&(d=!1);c=blackberry.bbm.platform.self;l.data||(l.data={});l.data.name=c.displayName;if(l.loggedIn&&"clay"===l.clearance)d&&d();else if(e.linked||blackberry.bbm.platform.register({uuid:"2c9fddda-5f69-11e3-8118-d231feb1dc81"}),blackberry.bbm.platform.self.getDisplayPicture(function(b){l.data.picture=
b;b={username:"bbm-"+c.handle.replace("=",""),name:c.displayName,picture:b};return h.socketEmit("user","signupOrLogin",b)}),d)return d()};e.invite=function(f,d){null==f&&(f={});null==d&&(d=!1);return this.post(f,d)};return e}();"object"===typeof blackberry&&blackberry.event&&blackberry.event.addEventListener("onaccesschanged",function(k,f){if("unregistered"===f)return e.linked=!1;if("allowed"===f)return e.linked=!0},!1);m.exports=e}).call(this)},{"../features/player":16,"../includes/events":32}],
6:[function(g,m,n){(function(){var e,h,l;e=g("../includes/clay");l=g("../includes/local");h=function(){function e(){}e.browser="unknown";e.os="unknown";e.platform="web";e.type="unknown";e.version=0;e.externalResourcesAllowed=!0;e.popupsAllowed=!0;e.popupListener=!0;e.popupBlocker=!0;e.check=function(){var f;f=navigator.userAgent;-1!==f.indexOf("Chrome")?this.browser="chrome":-1!==f.indexOf("Firefox")?this.browser="firefox":-1!==f.indexOf("MSIE")||-1!==f.indexOf("Trident/7")?this.browser="ie":-1!==
f.indexOf("Safari")?this.browser="safari":-1!==f.indexOf("Opera")?this.browser="opera":-1!==f.indexOf("BB10")&&(this.browser="blackberry");f.match(/(iPad|iPhone|iPod)/)?this.os="ios":-1!==f.indexOf("Android")?this.os="android":-1!==f.indexOf("Mobile")&&-1!==f.indexOf("Gecko")&&-1!==f.indexOf("Firefox")?this.os="firefoxos":-1!==f.indexOf("BB10")&&(this.os="blackberry");"undefined"!==typeof cards&&cards.kik?this.platform="kik":"undefined"!==typeof blackberry&&(blackberry.bbm||blackberry.invoke)?(this.platform=
"blackberry",this.popupBlocker=!1):"firefoxos"===this.os?this.platform="firefoxos":-1!==f.indexOf("FBIOS")?this.platform="facebook-webview":-1!==f.indexOf("Twitter for iPhone")?this.platform="twitter-webview":f.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)?this.platform="generic-webview":-1!==f.indexOf("AmazonWebAppPlatform")?(this.platform="amazon",this.popupListener=this.popupsAllowed=!1):-1!==f.indexOf("MSAppHost")&&"undefined"!==typeof Windows?(this.platform="windows8-app",this.popupsAllowed=
this.externalResourcesAllowed=!1):window.CocoonJS&&window.CocoonJS.App&&(this.platform="cocoonjs",this.popupsAllowed=!1);"android"===this.os?this.version=parseFloat(f.slice(f.indexOf("Android")+8)):"ios"===this.os&&(this.version=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||0);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(f)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(f.substr(0,
4))?this.type="mobile":this.type="desktop"};e.platformSpecifics=function(){if("cocoonjs"===this.platform)return l.container.addEventListener("click",function(f){if("A"===f.target.tagName&&f.target.href&&"http"===f.target.href.substring(0,4))return CocoonJS.App.openURL(f.target.href),f.preventDefault()});if("firefoxos"===e.os)return l.container.className="clay-firefoxos"};e.normalizeURL=function(f){return"kik"===this.platform?f.replace(/http(s)?:/,"card$1:"):f};return e}();h.check();e.ready(function(){return h.check()});
m.exports=h}).call(this)},{"../includes/clay":28,"../includes/local":34}],7:[function(g,m,n){(function(){var e,h={}.hasOwnProperty,l=function(e,f){function d(){this.constructor=e}for(var c in f)h.call(f,c)&&(e[c]=f[c]);d.prototype=f.prototype;e.prototype=new d;e.__super__=f.prototype;return e};e=function(e){function f(){}l(f,e);f.post=function(d,c){null==d&&(d={});null==c&&(c=!1);d.type="facebook";return this.superPost(d,c)};f.getShareURL=function(d){return"https://www.facebook.com/dialog/feed?app_id=176274425805503&display=popup&caption="+
encodeURIComponent(d.message)+(d.link?"&link="+encodeURIComponent(d.link):"")+(d.image?"&picture="+encodeURIComponent(d.image):"")+"&redirect_uri=http://clay.io/api/postreturn"};f.prototype.post=function(d,c){null==c&&(c=!1);f.post(d,c)};f.connect=function(d,c){null==d&&(d={});null==c&&(c=!1);d.type="facebook";return this.superConnect(d,c)};f.invite=function(d,c){null==d&&(d={});null==c&&(c=!1);d.type="facebook";return this.superInvite(d,c)};return f}(g("../features/social"));m.exports=e}).call(this)},
{"../features/social":20}],8:[function(g,m,n){(function(){var e,h,l,k,f,d,c;f=g("../includes/local");h=g("../includes/clay");k=g("../includes/events");d=g("../includes/offline");e=g("../includes/callbacks");l=g("../features/environment");c=g("../features/ui");m.exports={listening:!1,data:{},set:function(b,a){var c,d;null==b&&(b={});null==a&&(a=!1);this.listening||(k.socketListen("game","Game",null,!1),this.listening=!0);window&&window.location&&window.location.hash&&(b.hash=window.location.hash.replace("#",
""),k.socketListen("links","Links",null,!0));h.gameKey=b.key;b.version=h.VERSION;b.referrer=window.location!==window.parent.location?document.referrer:document.location.href;d=l.platform;b.referrer&&"web"===d||(b.referrer=d);b.platform=d;a&&(c=e.add(a));return k.socketEmit("game","set",b,null,c)},store:function(b,a){var c,d;null==a&&(a=!1);this.data=b;h.gameID=b.id;f.curTime=b.serverTime;b.css&&l.externalResourcesAllowed&&(c=document.createElement("style"),c.appendChild(document.createTextNode(b.css)),
d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(c,d));a&&e.execute(a,[b]);return this.checkForUpdates(b.lastUpdate)},checkForUpdates:function(c){if(d.fetch("game","storage","lastUpdate")<c)return k.socketEmit("game","checkUpdates")},checkForUpdatesCallback:function(c){d.set("game","storage","lastUpdate",c.lastUpdate,!0);return d.set("achievements","all","all",c.achievemens,!0)},failedLoadCallback:function(){if(h.options&&h.options.fail)return h.options.fail()},error:function(b){h.log(b);
return c.error(b)}}}).call(this)},{"../features/environment":6,"../features/ui":24,"../includes/callbacks":26,"../includes/clay":28,"../includes/events":32,"../includes/local":34,"../includes/offline":35}],9:[function(g,m,n){(function(){var e,h,l;g("../includes/clay");h=g("../includes/events");e=g("../includes/callbacks");g("../features/ui");l=function(){function k(f){this.instanceId=Math.random();this.games={};h.socketListen("gamemanager",this,null,!1)}k.prototype.fetchGames=function(f,d){var c;
d&&(c=e.add(d));return h.socketEmit("gamemanager","fetchGames",{limit:f.limit},this.instanceId,c)};k.prototype.showGames=function(f,d){f.show=!0;return this.fetchGames(f,d)};k.prototype.fetchGamesCallback=function(f,d){this.games=f.games||{};this.gamesLoaded=!0;f.show&&this.showGamesCallback(f);return e.execute(d,[f])};k.prototype.showGamesCallback=function(f){};k.prototype.getGames=function(){return this.games};k.prototype.newGame=function(f,d){var c;null==f&&(f={});null==d&&(d=!1);d&&(c=e.add(d));
return h.socketEmit("gamemanager","newGame",{to:f.to,data:f.data,reuse:f.reuse},this.instanceId,c)};k.prototype.newGameCallback=function(f,d){f.success&&(this.game=f.id,this.games[f.id]={name:f.name,count:f.count});if(d)return e.execute(d,[this.rooms[f.id]])};k.prototype.refresh=function(f){};return k}();(function(){function k(f){this.instanceId=Math.random();this.games={};h.socketListen("gamemanager",this,null,!1);this.fetchGames()}k.prototype.send=function(f,d){var c;d&&(c=e.add(d));return h.socketEmit("gamemanager",
"fetchGames",{},this.instanceId,c)};return k})();m.exports=l}).call(this)},{"../features/ui":24,"../includes/callbacks":26,"../includes/clay":28,"../includes/events":32}],10:[function(g,m,n){(function(){var e,h={}.hasOwnProperty,l=function(e,f){function d(){this.constructor=e}for(var c in f)h.call(f,c)&&(e[c]=f[c]);d.prototype=f.prototype;e.prototype=new d;e.__super__=f.prototype;return e};e=function(e){function f(){f.__super__.constructor.apply(this,arguments)}l(f,e);f.post=function(d,c){null==d&&
(d={});null==c&&(c=!1);d.type="google";return this.superPost(d,c)};f.getShareURL=function(d){return"https://plus.google.com/share?url="+encodeURIComponent(d.link)};f.connect=function(d,c){null==d&&(d={});null==c&&(c=!1);d.type="google";return this.superConnect(d,c)};f.invite=function(d,c){};return f}(g("../features/social"));m.exports=e}).call(this)},{"../features/social":20}],11:[function(g,m,n){(function(){var e,h,l,k;k=g("../features/player");h=g("../includes/events");e=g("../includes/callbacks");
l=function(){function f(){}f.listening=!1;f.listen=function(d){if(!this.listening)return h.socketListen("kik",this,!1,!1),this.listening=!0};f.post=function(d,c){var b,a,f,e;null==d&&(d={});null==c&&(c=!1);e=d.respond?"returnToConversation":"send";f=d.message||"";b=d.data||{};a=d.image||"";b={title:d.title||"Join me",text:f,data:b,noForward:d.noForward||!1};a&&(b.pic=a,b.big=!0);if(d.to)cards.kik[e](d.to,b);else cards.kik[e](b);if(c)return c()};f.grabAnonymousToken=function(){if(cards.kik.push&&cards.kik.push.getToken&&
!this.connecting&&!this.connected&&!localStorage.anonTokenStored||864E4<localStorage.anonTokenStored-Date.now())return cards.kik.push.getToken(function(d){localStorage.anonTokenStored=Date.now();return h.socketEmit("kik","storeAnonymousToken",{token:d})})};f.connecting=!1;f.connected=!1;f.connect=function(d,c){var b=this;null==d&&(d={});null==c&&(c=!1);if(k.loggedIn&&"clay"===k.clearance)c();else return this.connecting=!0,cards.kik.getUser(function(a){b.connecting=!1;if(a)return b.connected=!0,cards.push.getToken(function(b){var d;
k.data||(k.data={});k.data.name=a.fullName;k.data.username="kik-"+a.username;k.data.picture=a.thumbnail;d={username:"kik-"+a.username,name:a.fullName,picture:a.pic};if(!localStorage.tokenStored||864E4<localStorage.tokenStored-Date.now())d.kikToken=b,localStorage.tokenStored=Date.now();if(c)Clay.Player.onLogin(c);return h.socketEmit("user","signupOrLogin",d)});b.grabAnonymousToken();if(c)return c({success:!1})})};f.invite=function(d,c){null==d&&(d={});null==c&&(c=!1);return this.post(d,c)};f.findFriends=
function(d,c){var b,a=this;null==d&&(d={});null==c&&(c=!1);b=e.add(c);return cards.kik.pickUsers(d,function(d){var f,e,k,p;if(d){e=[];k=0;for(p=d.length;k<p;k++)f=d[k],e.push({username:f.username,name:f.fullName,picture:f.pic});d={users:e,platform:"kik"};a.listen();return h.socketEmit("user","bulkBefriend",d,!1,b)}c({error:!0,success:!1})})};f.findFriendsCallback=function(d,c){null==c&&(c=!1);console.log(d);return e.execute(c,[d])};return f}();m.exports=l}).call(this)},{"../features/player":16,"../includes/callbacks":26,
"../includes/events":32}],12:[function(g,m,n){(function(){var e,h,l,k,f,d,c,b,a,r,q,t,u,p;a=g("../includes/local");l=g("../includes/clay");f=g("../includes/events");r=g("../includes/offline");e=g("../includes/callbacks");p=g("../features/ui");c=g("../features/game");q=g("../features/player");k=g("../features/environment");h=g("../includes/cheatprevention");t=g("../features/social");u=g("../features/twitter");d=g("../features/facebook");g("../features/google");b=function(){function b(a){this.options=
a;"object"!==typeof this.options&&(l.log("This form of passing leaderboard ID is deprecated"),this.options={id:this.options});this.instanceId=Math.random();r.offline||f.socketListen("leaderboard",this,!1,!1)}b.prototype.challenge=null;b.prototype.setData=function(a){return this.options.data=a.data};b.prototype.update=function(a,b){var c,d,f,e,r,q,s;if(a){e=document.querySelectorAll(".clay-leaderboard-entry");r=document.querySelector(".clay-leaderboard-table-wrapper tbody");c=[];q=0;for(s=a.length;q<
s;q++)d=a[q],f=this.trFromRow(d,d.rank,{dynamicInsert:!0}),f.events&&(c=c.concat(f.events)),document.getElementById("clay-leaderboard-entry-"+d.id)||(r&&e[d.rank-1]?r.insertBefore(f.html,e[d.rank-1]):r&&r.appendChild(f.html));return p.handleEvents(c)}};b.prototype.fetch=function(a,b){null==a&&(a={});null==b&&(b=!1);a.fetch=!0;return this.show(a,b)};b.prototype.show=function(a,b){var c,d,r=this;null==a&&(a={});null==b&&(b=!1);this.options.id&&!a.id&&(a.id=this.options.id);this.options.data&&!a.data&&
(a.data=this.options.data);this.options.tabs&&!a.tabs&&(a.tabs=this.options.tabs);this.options.filters&&!a.filters&&(a.filters=this.options.filters);this.prevTab=0;this.tabs={};a.fetch||(d={title:"Loading Leaderboard...",html:"",id:"clay-leaderboard-wrapper",loading:!0},p.createModal(d,function(){if(a.listen)return f.addEvent("closemodal",function(){return r.stopListening()},!1,!0,document.getElementById(d.id))}));b&&(c=e.add(b));return f.socketEmit("leaderboard","show",a,this.instanceId,c)};b.prototype.stopListening=
function(){return f.socketEmit("leaderboard","stopListening",{},this.instanceId)};b.prototype.returnJSON=function(a,b){var c;c=a.data||{};a.getRank&&(c={data:c,rank:a.rank});if(b)return e.execute(b,[c])};b.prototype.display=function(a,b){var c,d,f,r,s,h,k,t,g,l,u,m,n=this;null==b&&(b=!1);this.tabs[this.prevTab]=a;r=[];a.name||(a.name="");d=[];t=[];h="";if(a.requireLogin)r.push("<p>You must <a href='#' id='clay-leaderboard-login'>login</a> to Clay.io to view your friends' scores</p>"),d=[{id:"clay-leaderboard-login",
action:"click",handler:function(){q.login(function(){a.reloadUser=!0;a.requireLogin=!1;return n.show(a)});return!1}}];else{a.html&&r.push("<div class='clay-leaderboard-custom-html'>"+a.html+"</div>");a.personal&&r.push("<div class='clay-leaderboard-personal' id='clay-leaderboard-personal-"+this.instanceId+"'>"+a.personal+"</div>");if(a.tabs&&1<a.tabs.length)for(g=a.tabs,h=function(){var a,b;a=f;b=k;return t.push({name:k.title,focused:n.prevTab===a,callback:function(){b.index=a;return n.setTab(b)}})},
f=c=0,s=g.length;c<s;f=++c)k=g[f],h();r.push("<div class='clay-leaderboard-table-wrapper' id='clay-leaderboard-table-"+this.instanceId+"'>");h=this.getTable(a);r.push(h.html.join(""));r.push("</div>");h.events&&h.events.length&&(d=d.concat(h.events));h="<div class='clay-td-first' style='width: 15%; min-width: 65px;'>Rank</div>";a.header&&(this.header=a.header);m=a.header;f=l=0;for(u=m.length;l<u;f=++l)c=m[f],s=f===a.header.length-1?"-last":"",g=85/a.header.length,"Name"===c&&(g=Math.round(14*g)/10),
"Score"===c&&(g=Math.round(6*g)/10),h+="<div class='clay-td"+s+"' style='width: "+g+"%'>"+c+"</div>"}c=document.getElementById("clay-leaderboard-wrapper");d={title:a.name||"Leaderboard",html:r,id:a.DOMid||"clay-leaderboard-wrapper",events:d,tabs:t,subnav:h,loading:!1};c&&"none"!==c.style.display?p.updateModal(d):p.createModal(d);if(b)return e.execute(b,[a])};b.prototype.hide=function(){return p.closeModal("clay-leaderboard-wrapper")};b.prototype.setTabs=function(a){return this.options.tabs=a.tabs};
b.prototype.setTab=function(a){var b,c;b="undefined"!==typeof a.selected;(c=document.getElementById("clay-leaderboard-tab-"+this.prevTab))&&!b&&(c.className="");(c=document.getElementById("clay-leaderboard-tab-"+a.index))&&!b&&(c.className="clay-tab-focus");c=document.getElementById("clay-leaderboard-wrapper-scroll-indicator");p.removeElement(c);this.prevTab=a.index;this.prevTabFilter=b=a.index+(b?"-"+a.selected:"");if(this.tabs[b])this.setTabCallback(this.tabs[b]);else return b={title:"Loading Leaderboard...",
html:"",id:"clay-leaderboard-wrapper",loading:!0},p.updateModal(b),f.socketEmit("leaderboard","setTab",a,this.instanceId)};b.prototype.setTabCallback=function(a){var b,c;(b=this.tabs)[c=this.prevTabFilter]||(b[c]=a);return this.display(a)};b.prototype.removeEntry=function(a){p.removeElement("clay-leaderboard-entry-"+a.id);return f.socketEmit("leaderboard","removeEntry",a,this.instanceId)};b.prototype.removeEntryCallback=function(a){if(a.error)return l.log("There was an error deleting that leaderboard score! "+
a.error)};b.prototype.share=function(b){var f,e,p,r,q,s,h,t,g;if("cocoonjs"!==k.platform&&"windows8-app"!==k.platform){if(f=document.getElementById("clay-leaderboard-share-wrapper-"+b.id))return f.parentNode.removeChild(f);s=document.getElementById("clay-leaderboard-entry-"+b.id);t=document.createElement("div");t.className="clay-share-score-wrapper";t.id="clay-leaderboard-share-wrapper-"+b.id;(e=document.getElementsByClassName("clay-leaderboard-entry"))&&e.length&&e[e.length-1].id===s.id&&(t.className+=
" clay-share-score-wrapper-top");h=s.getAttribute("data-score");q=s.getAttribute("data-rank");e=q.charAt(q.length-1);q="1"===e?q+"st":"2"===e?q+"nd":"3"===e?q+"rd":q+"th";p=a.getGameLink();e=document.createElement("a");e.className="clay-share-score-facebook";e.href="#";e.onclick=function(a){var e;e="I just scored "+h+" and am ranked "+q+" in "+c.data.name+". Think you can beat my score?";d?(new d).post({message:e+" "+p}):window.open("http://www.facebook.com/sharer/sharer.php?s=100&p[url]="+p+"&p[title]="+
c.data.name+"&p[summary]="+encodeURIComponent(e));(f=document.getElementById("clay-leaderboard-share-wrapper-"+b.id))&&f.parentNode.removeChild(f);return a.preventDefault()};s=document.createTextNode("Share on Facebook");e.appendChild(s);g=document.createElement("a");g.className="clay-share-score-twitter";g.href="#";g.onclick=function(a){var d;d="I just scored "+h+" and am ranked "+q+" in "+c.data.name+". Think you can beat my score? "+p;u?(new u).post({message:d}):window.open("http://twitter.com/home?status="+
encodeURIComponent(d));(f=document.getElementById("clay-leaderboard-share-wrapper-"+b.id))&&f.parentNode.removeChild(f);return a.preventDefault()};s=document.createTextNode("Share on Twitter");g.appendChild(s);t.appendChild(e);t.appendChild(g);if(r=document.getElementById("clay-leaderboard-share-"+b.id))r=r.parentNode;if(r)return setTimeout(function(){return r.appendChild(t)},0)}};b.prototype.getTable=function(a){var b,c,d,f,e,p,r,q,s=this;f=[];c=[];d=!1;if(a.filters&&1<a.filters.length){d=[];d.push("<select id='clay-leaderboard-filters'>");
q=a.filters;e=p=0;for(r=q.length;p<r;e=++p)b=q[e],d.push("<option value='"+e+"'"+(b.selected?" selected='selected'":"")+">"),d.push(b.title),d.push("</option>");c.push({id:"clay-leaderboard-filters",action:"change",handler:function(){var b,c;if(b=document.getElementById("clay-leaderboard-filters"))return c=JSON.parse(JSON.stringify(a.filters[b.value])),c.index=s.prevTab||0,c.selected=b.value,s.setTab(c,b.value)}})}f.push("<table>");f.push("<thead>");d&&(b=a.header&&a.header.length?a.header.length+
1:0,f.push("<tr><th class='clay-leaderboard-filters' colspan='"+b+"'>"),f.push("Filter by: "+d.join("")),f.push("</th></tr>"));f.push("</thead>");f.push("<tbody>");if(a.data&&0!==a.data.length&&0!==a.data[0].length){e=a.data;p=d=0;for(b=e.length;d<b;p=++d)r=e[p],p=this.trFromRow(r,p+1,a),f.push(p.html.join("")),p.events&&p.events.length&&(c=c.concat(p.events));a.rank&&a.rank.rank>a.data.length&&(a.rank.rank>a.data.length+1&&f.push("<tr class='clay-leaderboard-filler-row'><td colspan='"+(a.header.length+
1)+"'>...</td></tr>"),a.ignoreCSSRank=!0,p=this.trFromRow(a.rank.row,a.rank.rank,a),f.push(p.html.join("")),p.events&&p.events.length&&(c=c.concat(p.events)))}else b=a.header.length||"",f.push("<tr><td colspan='"+b+"'>No high scores yet!</td></tr>");f.push("</tbody>");f.push("</table>");return{html:f,events:c}};b.prototype.trFromRow=function(b,c,d){var f,e,p,r,s,h,t,g,u,m,n=this;s=[];p=[];d.dynamicInsert?(e=document.createElement("tr"),e.className=(b.me?"clay-leaderboard-me":"")+" clay-leaderboard-entry",
e.id=b.id?"clay-leaderboard-entry-"+b.id:"clay-leaderboard-entry-"+c,e.setAttribute("data-score",b.score),e.setAttribute("data-rank",c)):s.push("<tr class='"+(b.me?"clay-leaderboard-me":"")+" clay-leaderboard-entry' id='"+(b.id?"clay-leaderboard-entry-"+b.id:"clay-leaderboard-entry-"+c)+"' data-score='"+b.score+"' data-rank='"+c+"'>");s.push("<td class='clay-leaderboard-rank' style='width: 15%; min-width: 65px;'><span><span>"+c+"</span></span></td>");f=d.customData?Object.keys(b):["name","score"];
u=0;for(m=f.length;u<m;u++)h=f[u],g=b[h],(r=d.header&&d.header.length?d.header:this.header&&this.header.length?this.header:!1)?(r=r.length,r=85/r,"name"===h&&(r=Math.round(14*r)/10),"score"===h&&(r=Math.round(6*r)/10),s.push("<td style='width: "+r+"%;'>")):s.push("<td>"),s.push("<div class='relative'>"),"number"===typeof g&&(g=g.toString(),-1!==g.indexOf(".")?(r=g.split("."),g=r[0],g=g.replace(/\B(?=(\d{3})+(?!\d))/g,","),r=r[1],g=g+"."+r):g=g.replace(/\B(?=(\d{3})+(?!\d))/g,",")),"name"===h&&b.user_id?
(s.push("<img src='"+b.photo_url+"' /> "),s.push("<a href='"+l.BASEURL+"/userid/"+b.user_id+"' class='clay-pad-link' target='_blank'>"),s.push(a.htmlEntities(g)),s.push("</a>")):(d.allowHTML?s.push(g):s.push(a.htmlEntities(g)),b.me&&"score"===h&&q.loggedIn&&"clay"===q.clearance&&"kik"!==k.platform&&(t=b.id||c,g=function(a){n.share({id:t});a.preventDefault();return a.stopPropagation()},s.push("<div class='clay-share-score'>"),s.push("\t<a href='#' id='clay-leaderboard-share-"+t+"' class='clay-share-score-link'>share</a>"),
s.push("</div>"),p.push({id:"clay-leaderboard-share-"+t,action:"click",handler:g})),d.admin&&"score"===h&&function(){t=b.id;s.push("<a id='clay-leaderboard-remove-"+b.id+"' class='clay-close'></a>");return p.push({id:"clay-leaderboard-remove-"+b.id,action:"click",handler:function(){n.removeEntry({id:t});return!1}})}()),s.push("</div>"),s.push("</td>");d.dynamicInsert?(e.innerHTML=s.join(""),s=e):s.push("</tr>");return{html:s,events:p}};b.prototype.post=function(a,b){var c,d=this;if(!h.validCall())return"Score posted! Scoreboard update soon.";
c=function(){var c,p;"object"!==typeof a&&(l.log("This form of passing leaderboard score is deprecated"),a={score:a});a.id=d.options.id;b&&(c=e.add(b));return r.offline?(p={title:"Score Saved",content:"Your score will be posted to the globl leaderboard when you connect to the internet"},d.postCallback(p,c),r.save("leaderboard","post",a.id,a,!0)):f.socketEmit("leaderboard","post",a,d.instanceId,c)};return r.offline||a.name?c():q.requireLogin(function(){return c()})};b.prototype.postCallback=function(a,
c){var d,f;a.hideUI||p.createNotification({title:a.title,html:a.content});b.challenge&&b.challenge.leaderboard_id===a.leaderboard_id&&a.score>b.challenge.score&&(f=[],f.push("<div class='clay-challenge-text'><strong>Congratulations, scored</strong></div>"),f.push("<h1 class='clay-challenge-score'>You scored "+a.score+"</h1>"),f.push("<div class='clay-challenge-text'>You surpassed "+b.challenge.name+"'s score of "+b.challenge.score+"</div>"),f.push("<div><input type='submit' value='Share Your Accomplishment' id='clay-challenge-share-button' /></div>"),
d=[],d.push({id:"clay-challenge-share-button",handler:function(){return Links.create({type:"challenge",scoreId:a.id},function(a){return t.share({message:"I just beat "+b.challenge.name+"'s score in "+l.Game.data.name+". Think you can beat my score? "+a.url})})}}),d={id:"clay-challenge-wrapper",title:"You've Been Challenged!",html:f,events:d},p.createModal(d));return e.execute(c,[a])};b.prototype.challenge=function(a,b){var c,e,r=this;c=[];e=[];e.push("<h3 class='clay-challenge-score'>500</h3>");e.push("<div id='clay-challenge-direct-link-wrapper'>Generating direct link...</div>");
u&&e.push("<label for='clay-challenge-twitter'><input type='checkbox' id='clay-challenge-twitter' /> Post Challenge to Twitter</label>");d&&e.push("<label for='clay-challenge-facebook'><input type='checkbox' id='clay-challenge-facebook' /> Post Challenge to Facebook</label>");e.push("<label for='clay-challenge-friends'><input type='checkbox' id='clay-challenge-friends' /> Challenge Facebook Friends</label>");e.push("<div id='clay-challenge-friends-frame'></div>");e.push("<div><input type='submit' id='clay-challenge-button' value='Challene Friends' /></div>");
c.push({id:"clay-challenge-friends",action:"change",handler:function(){var a;a=document.createElement("iframe");a.src=l.BASEURL+"/api/facebookchallenge?id="+l.gameID;a.frameBorder=0;return document.getElementById("clay-challenge-friends-frame").appendChild(a)}});c.push({parentElementId:"clay-challenge-button",action:"click",handler:function(){return r.postChallenge()}});p.createModal({title:"Challenge a Friend",html:e,id:"clay-challenge-wrapper",events:c});return f.socketEmit("leaderboard","getDirectLink",
this.options,this.instanceId)};b.prototype.directLinkCallback=function(a){var b,c;c=document.getElementById("clay-challenge-direct-link-wrapper");c.innerHTML="";b=document.createElement("text");b.id="clay-challenge-direct-link";b.value=a.link;c.appendChild(b);return b.onclick=b.select()};b.prototype.postChallenge=function(){return(new d).post({message:"",link:""})};return b}();m.exports=b}).call(this)},{"../features/environment":6,"../features/facebook":7,"../features/game":8,"../features/google":10,
"../features/player":16,"../features/social":20,"../features/twitter":23,"../features/ui":24,"../includes/callbacks":26,"../includes/cheatprevention":27,"../includes/clay":28,"../includes/events":32,"../includes/local":34,"../includes/offline":35}],13:[function(g,m,n){(function(){var e,h,l,k,f;h=g("../includes/events");e=g("../includes/callbacks");l=g("../features/leaderboard");f=g("../features/ui");k={create:function(d,c){var b;null==d&&(d={});null==c&&(c=!1);c&&(b=e.add(c));h.socketListen("links",
"Links",null,!0);return h.socketEmit("links","create",d,null,b)},createCallback:function(d,c){null==c&&(c=!1);d.updateCurrent&&(history&&history.pushState?history.pushState({module:"leave"},document.title,"#"+d.hash):window.location.hash=d.hash);d.url=window.location.origin+window.location.pathname+"#"+d.hash;if(c)return e.execute(c,[d])},processHash:function(d){null==d&&(d={});"data"===d.type||"challenge"===d.type?(this.data=d.data,this.dataCallback&&this.dataCallback(this.data)):"room"===d.type&&
(this.rooms=new Clay.Rooms,this.rooms.joinRoom({id:d.roomId}));if("challenge"===d.type)return this.displayChallenge(),l.challenge=this.data},displayChallenge:function(){var d,c;c=[];c.push("<div class='clay-challenge-text'><strong>"+this.data.name+"</strong> challenged you to beat their score of: </div>");c.push("<h1 class='clay-challenge-score'>"+this.data.score+"</h1>");c.push("<div class='clay-challenge-text'>Think you have what it takes?</div>");c.push("<div><a href='#' class='clay-button' id='clay-challenge-play-button'>Play "+
Clay.Game.data.name+"</a></div>");d=[];d.push({id:"clay-challenge-play-button",handler:function(){return f.closeModal("clay-challenge-wrapper")}});return f.createModal({id:"clay-challenge-wrapper",title:"You've Been Challenged!",html:c,events:d})},data:null,dataCallback:null,getData:function(d){null==d&&(d=!1);null!==this.data&&d?d(k.data):d&&(this.dataCallback=d);return this.data},getChallenge:function(d){null==d&&(d=!1);return this.getData(d)},share:function(){}};m.exports=k}).call(this)},{"../features/leaderboard":12,
"../features/ui":24,"../includes/callbacks":26,"../includes/events":32}],14:[function(g,m,n){(function(){var e,h,l,k,f;k=g("../features/player");f=g("../features/ui");e=g("../includes/callbacks");l=g("../includes/local");h=g("../includes/events");m.exports={listening:!1,listen:function(){if(!this.listening)return h.socketListen("messages","Messages",!1,!1),this.listening=!0},modalOpen:function(){return!!document.getElementById("clay-messages-wrapper")},compose:function(d,c){var b,a,e,q=this;null==
d&&(d={});null==c&&(c=!1);a=[];b=[];a.push("<div class='clay-message-compose'>");a.push("\t<div class='clay-message-compose-to'><label for='clay-message-to'>To: </label>");d.to?a.push(d.to):a.push("\t\t<input type='text' id='clay-message-to' class='inline default-input' placeholder='Enter a username...' />");a.push("</div>");a.push("\t<div class='clay-message-compose-subject'><label for='clay-message-subject'>Subject: </label>");a.push("\t\t<input type='text' id='clay-message-subject' class='inline default-input' placeholder='Enter a subject...' />");
a.push("</div>");e=d.message||"";a.push("\t<textarea id='clay-message-compose-text' placeholder='Enter a message...'>"+e+"</textarea>");a.push("\t<input type='submit' id='clay-message-compose-button' />");b.push({id:"clay-message-compose-button",handler:function(a){var b,c;a.preventDefault();a=document.getElementById("clay-message-compose-text");e=a.value;a.value="";c=(c=document.getElementById("clay-message-to"))?c.value:d.to;b=(b=document.getElementById("clay-message-subject"))?b.value:d.subject;
if(a)return q.send({to:c,subject:b,message:e})}});b={title:"Compose a Message",html:a,id:"clay-messages-wrapper",events:b};this.modalOpen()||(b.tabs=this.getTabs("compose"));d.DOMid&&(b.DOMid=d.DOMid);return f.createModal(b)},send:function(d,c){var b,a;null==c&&(c=!1);if(d.message){if(a=document.getElementById("clay-messages"))a.innerHTML=this.displayMessage({message:d.message,from_id:k.data.id})+a.innerHTML;c&&(b=e.add(c));this.listen();return h.socketEmit("messages","send",d,null,b)}},sendCallback:function(d,
c){if(!d.reply)return this.show({id:d.id})},getTabs:function(d){var c,b=this;c=[];c.push({name:"Inbox",focused:"inbox"===d,callback:function(){return b.showAll()}});c.push({name:"Compose",focused:"compose"===d,callback:function(){return b.compose()}});return c},show:function(d,c){var b;null==c&&(c=!1);c&&(b=e.add(c));this.listen();return h.socketEmit("messages","show",d,null,b)},showCallback:function(d,c){var b,a,e,q,h,g,p=this;null==c&&(c=!1);a=[];b=[];q=d.data;if(q.length){a.push("<a href='#' id='clay-message-inbox-link'>&laquo; Inbox</a>");
e=function(a){a.preventDefault();return p.showAll()};b.push({id:"clay-message-inbox-link",handler:e});a.push("<div class='clay-message-reply'>");a.push("\t<textarea id='clay-message-reply-text' placeholder='Enter a message...'></textarea>");a.push("\t<input type='submit' id='clay-message-reply-button' />");e=function(a){var b;a.preventDefault();b=document.getElementById("clay-message-reply-text");a=b.value;b.value="";if(b)return p.send({to:q[0].from_id,message:a,threadId:q[0].thread_id,reply:!0})};
b.push({id:"clay-message-reply-button",handler:e});a.push("</div>");a.push("<div class='clay-message-subject'>");a.push(q[0].subject);a.push("</div>");a.push("<div id='clay-messages'>");h=0;for(g=q.length;h<g;h++)e=q[h],a.push(this.displayMessage(e));a.push("</div>")}else a.push("Thread not found!");b={title:"View Message",html:a,id:"clay-messages-wrapper",events:b};this.modalOpen()||(b.tabs=this.getTabs("inbox"));d.DOMid&&(b.DOMid=d.DOMid);return f.createModal(b)},displayMessage:function(d,c){var b;
b=[];b.push("<div class='clay-message'>");b.push("\t<div class='clay-message-header'>");b.push("\t\t<img src='"+Clay.BASEURL+"/avatar/"+d.from_id+"/20' /> ");b.push("\t\tSent by "+(d.other_username?d.other_username:"you")+" ");"undefined"===typeof d.time?b.push("\t\tjust now"):b.push(l.formatTime(d.time));b.push("\t</div>");b.push("\t<div class='clay-message-message'>");b.push(d.message.replace("\n","<br />"));b.push("\t</div>");b.push("</div>");return b.join("")},showAll:function(d,c){var b;null==
c&&(c=!1);c&&(b=e.add(c));this.listen();return h.socketEmit("messages","showAll",d,null,b)},showAllCallback:function(d,c){var b,a,r,q,h,g,p,s=this;null==c&&(c=!1);a=[];b=[];(q=d.data)&&q.length||a.push("You do not have any messages!");h=function(c){a.push("<div class='clay-message-thread' id='clay-message-thread-"+c.thread_id+"'>");a.push("\t<div class='clay-message-thread-icon'>");a.push("\t\t<img src='"+Clay.BASEURL+"/avatar/"+c.other_id+"/40' />");a.push("\t</div>");a.push("\t<div class='clay-message-header'>");
a.push("\t\tSent by "+(c.other_username?c.other_username:"you")+" ");"undefined"===typeof c.time?a.push("\t\tjust now"):a.push(l.formatTime(c.time));a.push("\t</div>");a.push("\t<div class='clay-message-thread-subject'>");a.push(c.subject);a.push("\t</div>");a.push("\t<div class='clay-message-thread-body'>");a.push(200<c.message.length?c.message.substring(0,200)+"...":c.message);a.push("\t</div>");a.push("</div>");return b.push({id:"clay-message-thread-"+c.thread_id,action:"click",handler:function(){return s.show({threadId:c.thread_id})}})};
g=0;for(p=q.length;g<p;g++)r=q[g],h(r);r={title:"Messages",html:a,id:"clay-messages-wrapper",events:b};this.modalOpen()||(r.tabs=this.getTabs("inbox"));d.DOMid&&(r.DOMid=d.DOMid);f.createModal(r);if(c)return e.execute(c,[d])}}}).call(this)},{"../features/player":16,"../features/ui":24,"../includes/callbacks":26,"../includes/events":32,"../includes/local":34}],15:[function(g,m,n){(function(){var e,h,l,k,f,d,c;h=g("../includes/clay");d=g("../features/player");e=g("../includes/callbacks");k=g("../includes/offline");
l=g("../includes/events");c=g("../features/ui");f=function(){function b(){this.items={};this.itemCallback=[];this.instanceId=Math.random();k.offline||l.socketListen("payment",this,null,!1)}b.prototype.addItem=function(a,b){var c;null==b&&(b=!1);if(k.offline)k.showWarning("purchase an item");else if("object"!==typeof a&&(a={id:a,type:"item"},h.log("This form of passing item ID is deprecated")),c=a.id,this.items[c]){if(this.items[c].quantity++,b)return b(this.items[c].data)}else return c=e.add(b),l.socketEmit("payment",
"addItem",a,this.instanceId,c)};b.prototype.addCustomItem=function(a,b){null==b&&(b=!1);this.items[a.id]={type:a.type||"custom",quantity:1,data:a};if(b)return b()};b.prototype.addItemStore=function(a,b){null==b&&(b=!1);a.success&&(this.items[a.id]={type:a.type||"item",quantity:1,data:a});if(b)return e.execute(b,[a])};b.prototype.getItemIds=function(){var a,b,c,d,f,e;b=[];f=this.items;for(a in f)for(c=f[a],d=1,e=c.quantity;1<=e?d<=e:d>=e;1<=e?++d:--d)b.push(c.type+"_"+a);return b};b.prototype.getItemsForURL=
function(){var a,b,c,d,f,e;c=[];f=this.items;for(a in f)for(b=f[a],d=1,e=b.quantity;1<=e?d<=e:d>=e;1<=e?++d:--d)b.data&&b.data.data?c.push({type:b.type,data:b.data.data}):b.data&&b.data.id&&c.push({type:b.type,id:b.data.id});return encodeURIComponent(JSON.stringify(c))};b.prototype.removeItem=function(a){"object"!==typeof a&&(a={id:a},h.log("This form of passing item ID is deprecated"));if(this.items[a.id]&&1<this.items[a.id].quantity)return this.items[a.id].quantity--,document.getElementById("clay-item-quantity-"+
a.id).innerHTML=this.items[a.id].quantity;delete this.items[a.id];return c.removeElement(document.getElementById("clay-item-"+a.id))};b.prototype.checkout=function(a,b){var d,f,e,p,s,h,g=this;null==a&&(a={});if(k.offline)k.showWarning("purchase an item");else{g=this;"object"!==typeof a&&(b=a);d=[];p=[];p.push("<table>");p.push("\t<thead>");p.push("\t\t<tr>");p.push("\t\t\t<th class='th-item-name'>Item Name</th>");p.push("\t\t\t<th class='th-quantity'>Quantity</th>");p.push("\t\t\t<th class='th-item-price'>Item Price</th>");
p.push("\t\t\t<th class='th-remove'>Remove</th>");p.push("\t\t</tr>");p.push("\t</thead>");p.push("\t<tbody>");s=this.items;for(f in s)e=s[f],p.push("\t<tr id='clay-item-"+f+"'>"),p.push("\t\t<td>"+e.data.name+"</td>"),p.push("\t\t<td id='clay-item-quantity-"+f+"'>"+e.quantity+"</td>"),p.push("\t\t<td id='clay-item-quantity-"+f+"'>$"+e.data.price+"</td>"),p.push("\t\t<td><a href='#' id='clay-remove-link-"+f+"'>&times;</a></td>"),p.push("\t</tr>");p.push("\t</tbody>");p.push("</table>");p.push("<input type='submit' id='clay-submit-button' value='Checkout'></span>");
d.push({id:"clay-submit-button",handler:function(){return g.pay(b)}});h=this.items;s=function(a){return d.push({id:"clay-remove-link-"+a,handler:function(){g.removeItem(a);return!1}})};for(f in h)e=h[f],s(f);f={title:"Purchase",html:p,id:"clay-payment-wrapper",events:d,DOMid:a.id};return c.createModal(f)}};b.prototype.pay=function(a){var b;b=this;return d.requireLogin(function(){var d,f;if(f=document.getElementById("clay-payment-wrapper"))f.style.maxWidth="339px";d=h.options&&h.options.debug?"&debug":
"";d={src:h.BASEURL+"/api/payment/?items="+b.getItemsForURL()+"&game_id="+h.gameID+d,id:"clay-payment-iframe"};c.updateModal({title:"Purchase",html:[],iframe:d,id:"clay-payment-wrapper",loading:!0,src:h.BASEURL+"/images/api/clay_shopping_cart.png"});return l.addEvent("message",function(d){var e;if(~h.BASEURL.indexOf(d.origin)){e=JSON.parse(d.data);if(e.height)return document.getElementById("clay-payment-iframe").style.height=e.height+"px",document.getElementById("clay-payment-iframe").style.width=
e.width+"px",f&&(f.style.maxWidth=parseInt(e.width)+30+"px"),c.centerModal("clay-payment-wrapper");if(e.popup)return c.showPopupNotifier(e.popup);if(e.popupClose)return c.hidePopupNotifier(e.popupClose);if(e.backToCart){if(f=document.getElementById("clay-payment-wrapper"))f.style.maxWidth=null;return b.checkout()}b.paymentCallback(e,a);return l.removeEvent("message",arguments.callee)}})},!0)};b.prototype.paymentCallback=function(a,b){c.closeModal("clay-payment-wrapper");b&&b(a);return l.socketEmit("payment",
"complete",a)};return b}();m.exports=f}).call(this)},{"../features/player":16,"../features/ui":24,"../includes/callbacks":26,"../includes/clay":28,"../includes/events":32,"../includes/offline":35}],16:[function(g,m,n){(function(){var e,h,l,k,f,d,c,b,a,r,q,t,u;a=g("../includes/local");h=g("../includes/clay");k=g("../includes/events");r=g("../includes/offline");e=g("../includes/callbacks");u=g("../features/ui");d=g("../features/game");l=g("../features/environment");t=g("../features/twitter");f=g("../features/facebook");
c=g("../features/google");b=g("../features/kik");q={loggedIn:!1,clearance:"site",installed:!1,identifier:0,callbacks:[],localStorageChecked:!1,socketListen:function(){return k.socketListen("user",q,null,!1)},setUsername:function(a){return k.socketEmit("user",{username:a})},maxSavesPerMinute:20,saveUserData:function(a,b,c){var d=this;null==b&&(b=!1);"string"===typeof a&&(a={key:a,data:b},b=c);this.savesThisMinuteInterval||(this.savesThisMinuteInterval=setInterval(function(){return d.savesThisMinute=
0},12E4));if(!(this.savesThisMinute>this.maxSavesPerMinute))return this.savesThisMinute||(this.savesThisMinute=0),this.savesThisMinute++,b=e.add(b),r.offline?(this.saveUserDataCallback(null,b),r.save("user","userData",a.key,a,!0)):k.socketEmit("user","saveUserData",a,!1,b)},saveUserDataCallback:function(a,b){return e.execute(b,[a])},fetchUserData:function(a,b){var c,d;null==a&&(a={});null==b&&(b=!1);"string"===typeof a&&(a={key:a});c=e.add(b);return r.offline&&!a.userId?(d=r.fetch("user","userData",
key),d={data:d?d:null,success:!0,key:key},this.fetchUserDataCallback(d,c)):k.socketEmit("user","fetchUserData",a,!1,c)},fetchUserDataCallback:function(a,b){return e.execute(b,[a])},storeUserData:function(a,b,c){null==c&&(c=!1);localStorage.clayData||(localStorage.clayData={});localStorage.clayData[a]=b;return c({success:!0,key:a})},fetchUserDataLocal:function(a,b){null==b&&(b=!1);return b({success:!0,key:a,data:[dataKey]})},getUsers:function(a,b){var c;null==a&&(a={});null==b&&(b=!1);c=e.add(b);return k.socketEmit("user",
"getUsers",a,!1,c)},getUsersCallback:function(a,b){null==b&&(b=!1);if(a)return e.execute(b,[a])},getFriends:function(a,b){var c;null==a&&(a={});null==b&&(b=!1);c=e.add(b);return a.friendsOf?k.socketEmit("user","getFriendsOfFriends",a,!1,c):k.socketEmit("user","getFriends",a,!1,c)},getFriendsCallback:function(a,b){null==b&&(b=!1);if(a)return e.execute(b,[a])},befriend:function(a,b){},fetchItems:function(a){a=e.add(a);return k.socketEmit("user","fetchItems",{},!1,a)},fetchItemsCallback:function(a,b){return e.execute(b,
[a])},grantItem:function(a,b){var c;null==b&&(b=!1);c=e.add(b);return k.socketEmit("user","grantItem",a,!1,c)},grantItemCallback:function(a,b){a.error||u.createNotification({title:"Item Granted!",html:"You just got "+a.quantity+": "+a.item.name+"!"});return e.execute(b,[a])},removeItem:function(a,b){var c;null==b&&(b=!1);c=e.add(b);return k.socketEmit("user","removeItem",a,!1,c)},removeItemCallback:function(a,b){return e.execute(b,[a])},purchaseGame:function(a){var b;b=new h.Payment;return b.addItem({type:"game",
id:h.gameID},function(){return b.checkout(a)})},hasInstalled:function(){return this.installed},getName:function(){return this.data.name||this.data.username},onUserReadyFunctions:[],onUserReady:function(a){return this.identifier?a({identifier:this.identifier}):this.onUserReadyFunctions.push(a)},onLoginFunctions:[],onLogin:function(a){return this.identifier&&this.data?a({name:this.getName(),identifier:this.identifier,success:!0}):this.onLoginFunctions.push(a)},doLogin:function(b){var d,r,q,g,k,l;h.log("Clay.io is ready");
this.identifier=b.identifier||"no-identifier";if(this.onUserReadyFunctions&&0<this.onUserReadyFunctions.length)for(l=this.onUserReadyFunctions,g=0,k=l.length;g<k;g++)d=l[g],"function"===typeof d&&d({identifier:this.identifier});if(b.success){this.clearance=b.clearance||"site";this.installed=b.installed||!1;f&&(f.linked=b.facebookLinked,f.permission=b.facebookPermission);t&&(t.linked=b.twitterLinked,t.permission=b.twitterPermission);c&&(c.linked=b.googleLinked,c.permission=b.googlePermission);if(b.notifications)for(k=
b.notifications,q=0,g=k.length;q<g;q++)d=k[q],this.notify(d);this.loggedIn=!0;this.data=b.data;if(this.onLoginFunctions&&0<this.onLoginFunctions.length)for(k=this.onLoginFunctions,q=0,g=k.length;q<g;q++)d=k[q],"function"===typeof d&&d({identifier:this.identifier,name:this.getName(),success:!0});q=this.callbacks;for(r in q)d=q[r],e.execute(d,[{success:!0,error:!1}]);this.successfulJSON&&"clay"===this.clearance&&localStorage.setItem("clayLogin",JSON.stringify(this.successfulJSON));b.fromPrompt&&u.closeModal("clay-login-wrapper",
!1)}else b.loginPrompt?!this.localStorageChecked&&(q=localStorage.getItem("clayLogin"))?(q=JSON.parse(q),this.sendLogin(q),this.localStorageChecked=!0):this.login({signup:!0}):b.error&&h.log(b.error);return a.callReadies()},tryLogin:function(){h.log("Trying Login");if(r.offline)return h.log("Initiating Offline Mode");if(!localStorage.getItem("clayLogin")&&"kik"!==h.Environment.platform)return a.xdr("APIGetUserInfo",{},this.loginXDRCallback)},loginXDRCallback:function(a){var b;b=function(a){return h.loaded?
k.socketEmit("user","login",a):setTimeout(function(){return b(a)},100)};return b(a)},setLoginTab:function(b){var c;if(c=document.getElementById("clay-login-iframe"))c.style.height="";c=document.getElementById("clay-login-wrapper");c.className=c.className.replace(/clay-signup-wrapper|clay-guest-wrapper|clay-login-wrapper/,"clay-"+b+"-wrapper");return a.sendMessageToFrame({tab:b})},login:function(q,r,g){var m,B,n,y,w,z,C,v=this;null==q&&(q={});null==r&&(r=!1);null==g&&(g=!1);"object"!==typeof q&&(z=
r,r=q,q=g||{},g=z);g||(g=q.signup);q||(q={});if("kik"===l.platform)b.connect(q,r);else return r&&this.callbacks.push(e.add(r)),r=[],z=[],g&&z.push("signup"),q.requireLogin&&z.push("require"),q.signupType&&z.push("signup_type="+q.signupType),B=document.getElementById("clay-login-wrapper"),C=[],C.push({name:"Login",focused:!g,callback:function(){return v.setLoginTab("login")}}),q.requireLogin||d.data.forceSignup||C.push({name:"Guest",focused:!1,callback:function(){return v.setLoginTab("guest")}}),C.push({name:"Signup",
focused:g,callback:function(){return v.setLoginTab("signup")}}),m=g?"clay-signup-wrapper":"clay-login-wrapper","kik"!==l.platform&&(r.push("<div class='clay-divider'></div>"),r.push("<div class='clay-login-bottom'>"),r.push("\t<div class='clay-action-icons clearfix' style='float: none; margin: 0 auto;'>"),r.push("\t\t<a href='#' class='clay-facebook-icon' id='clay-connect-facebook'></a>"),r.push("\t\t<a href='#' class='clay-twitter-icon' id='clay-connect-twitter'></a>"),r.push("\t\t<span class='clay-google-icon customGPlusSignIn' id='clay-connect-google'></span>"),
r.push("\t\t</span>"),r.push("\t\t<p>Social Login Options</p>"),r.push("\t</div>"),r.push("</div>")),n=[],n.push({id:"clay-connect-facebook",handler:function(){return f.connect({},w)}}),n.push({id:"clay-connect-twitter",handler:function(){return t.connect({},w)}}),n.push({id:"clay-connect-google",handler:function(){return c.connect({},w)}}),m={title:q.title||"Enable Clay.io",html:r,id:"clay-login-wrapper","class":m,tabs:C,DOMid:q.id,events:n},y="https://"+h.DOMAIN+"/api/login/"+h.gameKey+"?"+z.join("&"),
q.prerenderedFrame?(m.html="<div id='clay-login-prerender-wrapper'></div>"+r.join(""),a.focusedFrame=q.prerenderedFrame,y=a.focusedFrame.src,g=function(){var a;q.prerenderedFrame.style.display="block";if(a=document.getElementById("clay-login-prerender-wrapper"))return a.appendChild(q.prerenderedFrame)}):(m.iframe={src:y,id:"clay-login-iframe","class":"clay-"+(g?"signup":"login")+"-iframe",order:"prepend"},g=!1),B&&"none"!==B.style.display||u.createModal(m,g),k.addEvent("closemodal",function(){var a,
b,c,f;if(d.data.forceSignup||q.requireLogin||v.loggedIn){if(v.loggedIn){c=v.callbacks;f=[];for(b in c)a=c[b],f.push(e.execute(a,[{success:!0,error:!1}]));return f}c=v.callbacks;f=[];for(b in c)a=c[b],f.push(e.execute(a,[{success:!1,error:"Not logged in"}]));return f}return v.sendLogin({name:"Anonymous"})},!1,!0,document.getElementById(m.id)),w=function(){u.closeModal("clay-login-wrapper",!1);return k.removeEvent("message",arguments.callee)},g=function(a){if(~y.indexOf(a.origin)){a=JSON.parse(a.data);
a.popup?u.showPopupNotifier(a.popup):a.popupClose&&u.hidePopupNotifier(a.popupClose);a.openCocoonJSLink&&CocoonJS.App.openURL(openCocoonJSLink);if(a.height){if(B=document.getElementById("clay-login-iframe"))B.style.height=a.height+"px";u.centerModal("clay-login-wrapper")}a.tab&&v.setLoginTab(a.tab);if(a.success||a.hash||a.name)return v.sendLogin(a),w()}},k.addEvent("message",g)},logout:function(a,b){var c,d,f=this;null==a&&(a={});null==b&&(b=!1);c=e.add(b);d={title:"Logout",html:null,id:"clay-logout-wrapper",
iframe:{src:h.BASEURL+"/api/logout/"+h.gameKey,id:"clay-logout-iframe","class":"clay-logout-iframe"},DOMid:a.id};u.createModal(d);k.addEvent("closemodal",function(){return e.execute(c,[{success:!0,error:"Window closed without logging out"}])},!1,!0,document.getElementById(d.id));return k.addEvent("message",function(a){var b,d;if(~h.BASEURL.indexOf(a.origin)){d=JSON.parse(a.data);if(d.height){if(b=document.getElementById("clay-logout-iframe"))b.style.height=d.height+"px";return u.centerModal("clay-logout-wrapper")}u.closeModal("clay-logout-wrapper",
!1);k.removeEvent("message",arguments.callee);e.execute(c,[{success:!0,error:!1}]);f.clearance="none";f.installed=!1;f.identifier="no-identifier";f.loggedIn=!1;f.data={};return localStorage.removeItem("clayLogin")}})},signup:function(a,b){var c;null==a&&(a={});"object"!==typeof a&&(c=b,b=a,a=c||{});a.signup=!0;return this.login(a,b)},sendLogin:function(a){var b;a.identifier&&(this.identifier=a.identifier);b=a.hash?{fromPrompt:!0,hash:a.hash,identifier:a.identifier}:{fromPrompt:!0,username:a.name};
this.successfulJSON=a;k.socketEmit("user","login",b);return h.log("Logging in...")},requireLogin:function(a,b){var c=this;null==a&&(a=!1);null==b&&(b=!1);return!this.loggedIn||b&&"clay"!==this.clearance?this.login({signup:!0,requireLogin:b},function(){if(c.loggedIn&&(!b||"clay"===c.clearance))return a({success:!0,error:!1})}):a({success:!0,error:!1})},notify:function(a){console.log(JSON.stringify(a));if(a.ticker)return h.UI.createNotification({title:"New Notification!",html:a.ticker})},fetchNotifications:function(a,
b){var c;c=e.add(b);return k.socketEmit("user","fetchNotifications",a,!1,c)},fetchNotificationsCallback:function(a,b){console.log(a);return e.execute(b,[a])},pushNotify:function(a){return k.socketEmit("user","sendPushNotification",a)}};m.exports=q}).call(this)},{"../features/environment":6,"../features/facebook":7,"../features/game":8,"../features/google":10,"../features/kik":11,"../features/twitter":23,"../features/ui":24,"../includes/callbacks":26,"../includes/clay":28,"../includes/events":32,"../includes/local":34,
"../includes/offline":35}],17:[function(g,m,n){(function(){var e,h,l,k,f;e=g("../includes/clay");l=g("../includes/offline");h=g("../includes/events");f=g("../features/ui");k=function(){return function(d){var c,b;null==d&&(d={});l.offline?l.showWarning("rate a game"):(b=[],b.push("<iframe src='"+e.BASEURL+"/api/rate/?id="+e.gameID+"' id='clay-rate-iframe' frameBorder='0'></iframe>"),b={title:"Rate this Game",html:b,id:"clay-rate-wrapper"},d.id&&(c=document.getElementById(d.id))?c.innerHTML=html.join(""):
f.createModal(b),d=function(a){if(~e.BASEURL.indexOf(a.origin)&&(a=JSON.parse(a.data),a.height))return c=document.getElementById("clay-rate-iframe"),c.height=a.height,c.style.height=a.height+"px",f.centerModal("clay-rate-wrapper")},h.addEvent("message",d))}}();m.exports=k}).call(this)},{"../features/ui":24,"../includes/clay":28,"../includes/events":32,"../includes/offline":35}],18:[function(g,m,n){(function(){var e,h,l,k,f;h=g("../includes/clay");l=g("../includes/events");e=g("../includes/callbacks");
f=g("../features/ui");k=function(){function d(c){var b,a;null==c&&(c={});"function"===typeof c?this.fullCallback=c:(this.fullCallback=c.fullCallback,b=c.callback);this.instanceId=Math.random();this.rooms={};this.roomsLoaded=this.room=!1;l.socketListen("rooms",this,null,!1);b&&(a=e.add(b));l.socketEmit("rooms","fetch",{show:!1},this.instanceId,a)}d.prototype.setFullCallback=function(c){this.fullCallback=c};d.prototype.show=function(c){c=e.add(c);return l.socketEmit("rooms","fetch",{show:!0},this.instanceId,
c)};d.prototype.fetchCallback=function(c,b){var a,d,q,g,h,k,l,m=this,m=this;this.rooms=c.rooms||{};this.roomsLoaded=!0;if(c.show){q=[];q.push("<table>");q.push("<thead>");l=c.header;h=0;for(k=l.length;h<k;h++)d=l[h],q.push("<th>"+d+"</th>");q.push("<tbody id='clay-rooms'>");h=c.rooms;for(g in h)if(d=h[g])q.push("<tr id='clay-room-"+g+"'>"),q.push(this.getRoomTd(d,!1,!1,!0)),q.push("</tr>");q.push("</tbody>");q.push("</table>");q.push("<span id='clay-room-add'>");q.push("\t<input type='text' id='clay-room-name' placeholder='New Room Name' /> <input type='submit' value='Create Room' id='clay-create-room-button' />");
q.push("</span>");a=[];h=c.rooms;for(g in h)(d=h[g])&&d.count<d.max&&function(b){return a.push({id:"clay-join-"+b+"-link",handler:function(){m.joinRoom(b);return!1}})}(g);a.push({id:"clay-create-room-button",handler:function(){return m.createRoom()}});q={title:"Rooms",html:q,id:"clay-rooms-wrapper",events:a};f.createModal(q)}return e.execute(b,[this.rooms])};d.prototype.getRooms=function(){return this.rooms};d.prototype.createRoom=function(c,b){var a,d;null==c&&(c={});null==b&&(b=!1);b&&(a=e.add(b));
if(d=document.getElementById("clay-room-name"))c.name||(c.name=d.value);return l.socketEmit("rooms","createRoom",{name:c.name},this.instanceId,a)};d.prototype.createRoomCallback=function(c,b){var a,d;if(c.success){d=document.getElementById("clay-rooms");a=this.getRoomTd(c,!0);d&&a&&d.appendChild(a);if(a=document.getElementById("clay-room-add"))a.innerHTML="Room created, waiting for more players...";this.room=c.id;this.rooms[c.id]={name:c.name,count:c.count};this.rooms[c.id].count>=c.max&&this.roomFull(c)}if(b)return e.execute(b,
[this.rooms[c.id]])};d.prototype.getRoomTd=function(c,b,a,d){var f;null==b&&(b=!1);null==a&&(a=!1);null==d&&(d=!1);if(d)return a=[],a.push("<td>"+c.name+"</td>"),a.push("<td>"+c.count+"</td>"),a.push("<td id='clay-join-"+c.id+"-link-wrapper'>"+(b?"In Room":c.count>=c.max?"Room Full":"<a href='#' id='clay-join-"+c.id+"-link'>Join Room</a>")+"</td>"),a.join("");a?a.innerHTML="":(a=document.createElement("tr"),a.id="clay-room-"+c.id);d=document.createElement("td");f=document.createTextNode(c.name);d.appendChild(f);
a.appendChild(d);d=document.createElement("td");f=document.createTextNode(c.count);d.appendChild(f);a.appendChild(d);d=document.createElement("td");d.id="clay-join-"+c.id+"-link-wrapper";b?(f=document.createTextNode("In Room"),d.appendChild(f)):c.count>=c.max?(f=document.createTextNode("Room Full"),d.appendChild(f)):(b=document.createElement("a"),b.id="clay-join-"+c.id+"-link",f=document.createTextNode("Room Full"),b.appendChild(f),d.appendChild(b));a.appendChild(d);return a};d.prototype.joinRoom=
function(c,b){var a;null==b&&(b=!1);"object"!==typeof c&&(c={id:c},h.log("This form of passing item ID is deprecated"));b&&(a=e.add(b));return l.socketEmit("rooms","joinRoom",c,this.instanceId,a)};d.prototype.joinRoomCallback=function(c,b){c.success?(this.room=c.id,this.rooms[c.id].count++,this.refreshTd(c.id,!0),this.rooms[c.id].count>=c.max&&this.roomFull(c)):f.error(c.error,"clay-rooms-wrapper-content");if(b)return e.execute(b,[this.rooms[c.id]])};d.prototype.leaveRoom=function(c){var b;null==
c&&(c=!1);c&&(b=e.add(c));return l.socketEmit("rooms","leaveRoom",{},this.instanceId,b)};d.prototype.leaveRoomCallback=function(c,b){if(b)return e.execute(b)};d.prototype.refresh=function(c){this.rooms[c.id]={name:c.name,count:c.count};this.refreshTd(c.id);if(c.count>=c.max)return this.roomFull(c)};d.prototype.roomFull=function(c){this.room===c.id&&(c.instance=this,this.fullCallback&&this.fullCallback(c),f.closeModal("clay-rooms-wrapper"));f.removeElement(document.getElementById("clay-room-"+c.id));
return delete this.rooms[c.id]};d.prototype.refreshTd=function(c,b){var a,d,e,g=this;null==b&&(b=!1);d=this.rooms[c];d.id=c;(a=document.getElementById("clay-room-"+c))&&0<d.count?this.getRoomTd(d,b,a):a?f.removeElement(a):(a=document.getElementById("clay-rooms"))&&a.appendChild(this.getRoomTd(d,b));if(!b){e=function(){g.joinRoom({id:c});return!1};d=[];if(a=document.getElementById("clay-join-"+c+"-link-wrapper"))a.innerHTML="<a href='#' id='clay-join-"+c+"-link'>Join Room</a>";d.push({id:"clay-join-"+
c+"-link",handler:e});return f.handleEvents(d)}};return d}();m.exports=k}).call(this)},{"../features/ui":24,"../includes/callbacks":26,"../includes/clay":28,"../includes/events":32}],19:[function(g,m,n){(function(){var e,h,l,k;e=g("../includes/callbacks");h=g("../includes/events");k=g("../features/ui");l=function(){function f(d,c){null==c&&(c=!1);this.id=d?d.id||!1:!1;("undefined"===typeof d||"undefined"===typeof d.prompt||d.prompt)&&this.prompt(c);this.instanceId=Math.random();h.socketListen("screenshot",
this,null,!1)}f.prototype.prompt=function(d){var c,b,a,f,e=this;f=[];a=[];(b=this.id?document.getElementById(this.id):document.getElementsByTagName("canvas")[0])&&!this.data&&(this.data=b.toDataURL("image/png"));f.push("<img class='clay-screenshot' src='"+this.data+"' height='200' />");f.push("<div><input type='submit' value='save' id='clay-screenshot-save-"+this.instanceId+"' /></div>");c=function(a){d&&d(a);return k.closeModal("clay-screenshot-wrapper")};a.push({id:"clay-screenshot-save-"+this.instanceId,
handler:function(){return e.save(c)}});return k.createModal({title:"Screenshot",html:f,id:"clay-screenshot-wrapper",events:a})};f.prototype.save=function(d,c){var b,a;null==d&&(d={});null==c&&(c=!1);"object"!==typeof d&&(c=d,d={});a=this.id?document.getElementById(this.id):document.getElementsByTagName("canvas")[0];this.data||(this.data=a.toDataURL("image/png"));d.data=this.data;c&&(b=e.add(c));return h.socketEmit("screenshot","save",d,this.instanceId,b)};f.prototype.saveCallback=function(d,c){c&&
e.execute(c,[d]);if(d.success&&!d.hideUI)return k.createNotification({title:"Success!",html:"Your screenshot was added to Clay.io"});if(!d.hideUI)return k.createNotification({title:"Error",html:d.error})};return f}();m.exports=l}).call(this)},{"../features/ui":24,"../includes/callbacks":26,"../includes/events":32}],20:[function(g,m,n){(function(){var e,h,l,k,f,d;e=g("../includes/callbacks");k=g("../includes/offline");l=g("../includes/events");h=g("../features/environment");d=g("../features/ui");f=
function(){function c(){}c.linked=!1;c.listening=!1;c.listen=function(b){if(!this.listening)return l.socketListen(b.type,this,!1,!1),this.listening=!0};c.getPrettyType=function(b){return"facebook"===b?"Facebook":"twitter"===b?"Twitter":"Clay.io"};c.superPost=function(b,a){var c,f,g,u=this;null==b&&(b={});null==a&&(a=!1);g=this.getPrettyType(b.type);if(k.offline)k.showWarning("post a message to "+g);else{if(h.popupListener){"object"!==typeof b&&(Clay.log("This form of passing post message is deprecated"),
b={message:b});this.listen(b);"number"===typeof a?this.callbackId=c=a:a&&(this.callbackId=c=e.add(a));if(b.editable)return f=[],f.push("<textarea id='clay-share-message'>"+b.message+"</textarea>"),f.push("<div><a href='#' id='clay-share-button-a' class='clay-button'>Share</a></div>"),c=[{id:"clay-share-button-a",action:"click",handler:function(){document.getElementById("clay-share-button-a").innerHTML="Loading...";b.message=document.getElementById("clay-share-message").value;b.editable=!1;u.post(b,
function(b){d.closeModal("clay-share-wrapper");if(a)return a(b)});return!1}}],Clay.UI.createModal({title:"Share Clay.io on "+g,html:f,id:"clay-share-wrapper",events:c});h.popupsAllowed&&h.popupBlocker&&!this.linked&&(g="ios"===h.os?"http://clay.io/iosfocus.html":"",this.connectWindow=d.openWindow(g,"_system","width=600,height=400"));b.posting=!0;return l.socketEmit(b.type,"post",b,!1,c)}Clay.Stats.log({name:b.type});d.openWindow(this.getShareURL(b),"_blank","width=600,height=400")}};c.postCallback=
function(b,a){b.error||b.hideUI||d.createNotification({title:b.title,html:b.content});console.log(a);return e.execute(a,[b])};c.requestPermission=function(b,a){null==b&&(b={});null==a&&(a=!1);d.createModal({title:"Grant Permissions",iframe:{src:Clay.BASEURL+"/api/social/clay?site="+b.type+"&id="+Clay.gameID,id:"clay-"+b.type+"-iframe"},id:"clay-"+b.type+"-wrapper"});return l.addEvent("message",function(c){var f;if(~Clay.BASEURL.indexOf(c.origin)&&(f=JSON.parse(c.data),f.success?(d.closeModal("clay-"+
b.type+"-wrapper"),l.socketEmit(b.type,"requestPermissionCallback",b,!1,a)):!1===f.success&&d.closeModal("clay-"+b.type+"-wrapper"),f.success||!1===f.success))return l.removeEvent("message",arguments.callee)})};c.superConnect=function(b,a){var c,f;null==a&&(a=!1);this.listen(b);c=function(){var c;c=e.add(a);return l.socketEmit(b.type,"connect",b,!1,c)};if("kik"===h.platform)return Clay.Kik.connect({},function(){b.redirectURL=window.location.href.replace("http://","card://").replace("https://","cards://");
return c()});if(h.popupsAllowed)return f="ios"===h.os?"http://clay.io/iosfocus.html":"","blackberry"!==h.platform&&(this.connectWindow=d.openWindow(f,"_system","width=600,height=400")),c()};c.connectCallback=function(b,a){null==a&&(a=!1);return e.execute(a)};c.openConnectWindow=function(b,a){var c,f,g,k=this;null==a&&(a=!1);f=this.getPrettyType(b.type);if(h.popupsAllowed){"kik"!==h.platform&&h.popupBlocker&&d.showPopupNotifier(f);this.connectWindow?(this.connectWindow.location=b.url,this.connectWindow.focus()):
this.connectWindow=d.openWindow(b.url,"_system","width=600,height=400");c=function(c){var g;if(~c.origin.indexOf(Clay.DOMAIN)&&(g=JSON.parse(c.data),g.success))return g.loggedIn||(b.login=!0,b.hash=g.hash),d.hidePopupNotifier(f),k.linked=!0,l.socketEmit(b.type,"connectCallback",b,!1,a),b.fromServer||e.execute(a),l.removeEvent("message",arguments.callee)};if("kik"===h.platform)cards.browser.on("linkData",function(){var a;a={origin:"http://clay.io",data:JSON.stringify(cards.browser.linkData)};return c(a)});
else l.addEvent("message",c);return g=setInterval(function(){if(k.connectWindow&&k.connectWindow.closed)return clearInterval(g),delete k.connectWindow,setTimeout(function(){return l.removeEvent("message",c)},100)},500)}if(confirm("Choose yes to leave this page and connect to "+f))return window.location.href=b.url};c.smartInstall=function(b,a){null==b&&(b={});null==a&&(a=!1);localStorage.clayData||(localStorage.clayData={});if(localStorage.clayData["smart-install-requested"])return a(),!1;localStorage.clayData["smart-install-requested"]=
1;return"ios"===h.os&&"facebook-webview"===h.platform?(b.app="facebook",this.promptSafari(b,a)):"ios"===h.os&&"twitter-webview"===h.platform?(b.app="twitter",this.promptSafari(b,a)):"ios"===h.os&&"safari"===h.browser?this.promptHomeScreenInstall(b,a):a()};c.promptSafari=function(b,a){var c,f;null==b&&(b={});c=b.app||"generic";f=[];f.push("<div class='clay-prompt-safari-overlay' id='clay-prompt-safari-wrapper'>");f.push(" <div class='clay-prompt-safari clay-"+c+"-prompt-safari' id='clay-prompt-safari'>");
f.push('Want to install this game? Click this icon, then "Open in Safari" to start the install process');f.push("\t\t<a href='#' id='clay-prompt-safari-close' class='clay-close'>&times;</a>");f.push("\t</div>");f.push("</div>");return d.addToContainer(f,function(){var b;if(b=document.getElementById("clay-prompt-safari-close"))b.onclick=function(){d.closeNotification("clay-prompt-safari-wrapper");a();return!1};b=document.getElementById("clay-prompt-safari");try{return b.className+=" clay-fade-in"}catch(c){}})};
c.promptHomeScreenInstall=function(b,a){var c;null==b&&(b={});c=[];c.push("<div class='clay-ios-install-overlay' id='clay-ios-install-wrapper'>");c.push(" <div class='clay-ios-install' id='clay-ios-install'>");c.push('Want to install this game? Click the icon below then "Add to Home Screen"');c.push("\t\t<a href='#' id='clay-ios-install-close' class='clay-close'>&times;</a>");c.push("\t</div>");c.push("</div>");return d.addToContainer(c,function(){var b;if(b=document.getElementById("clay-ios-install-close"))b.onclick=
function(){d.closeNotification("clay-ios-install-wrapper");a();return!1};b=document.getElementById("clay-ios-install");try{return b.className+=" clay-fade-in"}catch(c){}})};c.smartShare=function(b,a){null==b&&(b={});null==a&&(a=!1);if("kik"===h.platform)return Clay.Kik.post(b,a);if("blackberry"===h.platform)return Clay.BBM.post(b,a);if("facebook-webview"===h.platform)if(Facebook&&Facebook.linked){if(confirm("Challenge your friends on Facebook"))return Clay.Facebook.post(b,a)}else return b.app="facebook",
this.smartWebView(b,a);else return"twitter-webview"===h.platform?(b.app="twitter",this.smartWebView(b,a)):this.genericShare(b,a)};c.genericShare=function(b,a){null==b&&(b={});null==a&&(a=!1);return this.share(b,a)};c.smartWebView=function(b,a){var c,f,e;null==b&&(b={});null==a&&(a=!1);c=b.app||"generic";e="twitter"===c?"Click this icon to challenge your friends to beat your score!":'Click "Share" to challenge your friends to beat your score!';f=[];f.push("<div class='clay-webview-share-overlay' id='clay-webview-share-wrapper'>");
f.push(" <div class='clay-webview-share clay-"+c+"-share' id='clay-webview-share'>");f.push(e);f.push("\t\t<a href='#' id='clay-webview-share-close' class='clay-close'>&times;</a>");f.push("\t</div>");f.push("</div>");return d.addToContainer(f,function(){var a;if(a=document.getElementById("clay-webview-share-close"))a.onclick=function(){d.closeNotification("clay-webview-share-wrapper");return!1};a=document.getElementById("clay-webview-share");try{return a.className+=" clay-fade-in"}catch(b){}})};
c.share=function(b,a){var c,f,e,g;null==b&&(b={});null==a&&(a=!1);e=b.message||"";f=[];f.push("<textarea id='clay-share-message' placeholder='Enter your message...'>"+e+"</textarea>");b.ignoreScreenshot||(f.push("<input type='checkbox' id='clay-share-screenshot'>"),f.push("<label for='clay-share-screenshot'>Include Screenshot</label>"));f.push("<div class='clay-share-buttons'>");f.push("\t<a class='clay-share-button' id='clay-share-facebook' href='#'>");f.push("\t\t<span class='clay-share-button-action clay-share-button-facebook'>Share</span>");
f.push("\t</a>");f.push("\t<a class='clay-share-button' id='clay-share-twitter' href='#'>");f.push("\t\t<span class='clay-share-button-action clay-share-button-tweet'>Tweet</span>");f.push("\t</a>");f.push("</div>");c=[];g=function(c){var f,g;this.childNodes[1].innerHTML="Sharing...";f=function(f){var g;null==f&&(f=!1);e=(g=document.getElementById("clay-share-message"))?g.value:"";f&&(e+=" "+f);b.message=e;return Clay[c].post(b,function(b){d.closeModal("clay-share-wrapper");if(a)return a(b)})};return(g=
document.getElementById("clay-share-screenshot"))&&g.checked?(g=new Screenshot({prompt:!1}),g.save(function(a){return f(a.url)})):f()};c.push({id:"clay-share-facebook",action:"click",handler:function(){return g.call(this,"Facebook")},once:!0});c.push({id:"clay-share-twitter",action:"click",handler:function(){return g.call(this,"Twitter")},once:!0});return d.createModal({title:"Share Options",html:f,id:"clay-share-wrapper",events:c,loading:!1})};c.superInvite=function(b,a){var c;c=[];b.caption&&encodeURIComponent(b.caption);
c.push("");d.createModal({title:"Invite Your Friends",html:c,id:"clay-facebook-invite-wrapper",DOMid:b.id});c=e.add(a);this.listen(b);return l.socketEmit(b.type,"getFriends",b,!1,c)};c.getFriendsCallback=function(b,a){var c,f,e,g,h,k,l,m,n=this;e=[];c=[];if(b.success&&b.friends){e.push("<div class='clay-friends-invite-button'><input type='submit' id='clay-friends-invite-top' value='Invite Friends!' /></div>");g=function(){return n.inviteFriends()};c.push({id:"clay-friends-invite-top",handler:g});
m=b.friends;h=function(){var a;a=f.id;g=function(){var b,c;c=document.getElementById("clay-friend-"+a);b=document.getElementById("clay-friend-checkbox-"+a);if(c&&b&&!b.checked)return c.className="clay-befriend-box clay-befriend-box-selected",b.checked=!0;c.className="clay-befriend-box";return b.checked=!1};return c.push({id:"clay-friend-"+a,handler:g})};k=0;for(l=m.length;k<l;k++)f=m[k],e.push("<div data-id='"+f.id+"' data-name='"+f.name+"' id='clay-friend-"+f.id+"' class='clay-befriend-box'>"),e.push("\t<input type='checkbox' id='clay-friend-checkbox-"+
f.id+"' /><label for='clay-friend-checkbox-"+f.id+"'></label>"),f.picture&&e.push("\t<br /><img src='"+f.picture+"' /><br />"),e.push(f.name),e.push("</div>"),h();e.push("<div class='clay-friends-invite-button'><input type='submit' id='clay-friends-invite-bottom' value='Invite Friends!' /></div>");g=function(){return n.inviteFriends()};c.push({id:"clay-friends-invite-bottom",handler:g})}return d.updateModal({title:"Invite Your Friends",html:e,events:c,id:"clay-facebook-invite-wrapper"})};return c}();
m.exports=f}).call(this)},{"../features/environment":6,"../features/ui":24,"../includes/callbacks":26,"../includes/events":32,"../includes/offline":35}],21:[function(g,m,n){(function(){var e,h;h=g("../includes/offline");e=g("../includes/events");m.exports={log:function(g){g={type:g.name,quantity:g.quantity||1};return h.offline?h.save("stats","log",null,g,!1):e.socketEmit("stats","logFromAPI",g,1)},logStat:function(e){return this.log(e)},level:function(g){return e.socketEmit("stats","level",g,1)}}}).call(this)},
{"../includes/events":32,"../includes/offline":35}],22:[function(g,m,n){(function(){var e,h={}.hasOwnProperty,l=function(e,f){function d(){this.constructor=e}for(var c in f)h.call(f,c)&&(e[c]=f[c]);d.prototype=f.prototype;e.prototype=new d;e.__super__=f.prototype;return e};e=function(e){function f(){}l(f,e);f.post=function(d,c){null==d&&(d={});null==c&&(c=!1);d.type="stream";return this.superPost(d,c)};f.prototype.post=function(d,c){null==c&&(c=!1);f.post(d,c)};return f}(g("../features/social"));
m.exports=e}).call(this)},{"../features/social":20}],23:[function(g,m,n){(function(){var e,h={}.hasOwnProperty,l=function(e,f){function d(){this.constructor=e}for(var c in f)h.call(f,c)&&(e[c]=f[c]);d.prototype=f.prototype;e.prototype=new d;e.__super__=f.prototype;return e};e=function(e){function f(){}l(f,e);f.post=function(d,c){null==d&&(d={});null==c&&(c=!1);d.type="twitter";return this.superPost(d,c)};f.getShareURL=function(d){return"https://twitter.com/intent/tweet?text="+encodeURIComponent(d.message)+
(d.image?" "+encodeURIComponent(d.image)+" ":"")+(d.link?"&url="+encodeURIComponent(d.link):"")};f.prototype.post=function(d,c){null==c&&(c=!1);n.Twitter.post(d,c)};f.connect=function(d,c){null==d&&(d={});null==c&&(c=!1);d.type="twitter";return this.superConnect(d,c)};f.invite=function(d,c){null==d&&(d={});null==c&&(c=!1);d.type="twitter";return this.superInvite(d,c)};return f}(g("../features/social"));m.exports=e}).call(this)},{"../features/social":20}],24:[function(g,m,n){var e=g("__browserify_process");
(function(){var h,l,k,f,d,c;f=g("../includes/local");h=g("../includes/clay");k=g("../includes/events");l=g("../features/environment");d=g("../includes/offline");c=function(){function b(){}b.modalsOpened={};b.notificationsOpened={};b.error=function(a,b){var c,d;if(h.options.hideUI)h.log("Error: "+a,!0);else if(b)return(c=document.getElementById(b+"-error"))?(c.innerHTML=a,c.style.display="block"):(c=document.createElement("div"),d=document.createTextNode(a),c.id=b+"-error",c.className="error",c.appendChild(d),
(d=document.getElementById(b))?d.insertBefore(c,d.firstChild):h.log("Error: "+a,!0)),setTimeout(function(){return c.style.display="none"},3E3)};b.modalsOpen=function(){return f.objectLength(this.modalsOpened)};b.notificationsOpen=function(){return f.objectLength(this.notificationsOpened)};b.closeAllUI=function(){var a,b,c;b=this.modalsOpened;for(a in b)this.closeModal(a);b=this.notificationsOpened;c=[];for(a in b)c.push(this.closeNotification(a));return c};b.closeModal=function(a,c){var d,e,g=this;
null==c&&(c=!0);if(!h.options.hideUI){if(!a||!(d=document.getElementById(a))&&"clay-login-wrapper"!==a)d=document.querySelector(".clay-modal-wrapper, .clay-custom-wrapper");if(e=d){for(;e.parentNode&&e.parentNode!==f.container;)e=e.parentNode;c&&k.triggerEvent("closemodal",d)}else if(!a&&f.container.getElementsByTagName("div")[0])e=f.container.getElementsByTagName("div")[0];else return;try{document.getElementById(a).parentNode.parentNode.className+=" clay-fade-out"}catch(p){}return setTimeout(function(){var c,
f;f=!1;if(d&&d.parentNode&&"clay-custom-wrapper"===d.className)d.parentNode.removeChild(d);else if(e&&e.parentNode)e.parentNode.removeChild(e),f=!0;else for(;c=document.getElementById(a);)try{c.parentNode.parentNode.parentNode.removeChild(c.parentNode.parentNode),f=!0}catch(k){}if(f&&(delete g.modalsOpened[a],h.log("Modal removed ("+a+") ("+g.modalsOpen()+")"),"cocoonjs"===l.platform))return 0===g.modalsOpen()&&0===g.notificationsOpen()&&h.log("Hiding CocoonJS Webview"),CocoonJS.App.forwardAsync("clay_modal_count( "+
b.modalsOpen()+" );"),CocoonJS.App.hide()},300)}};b.getDocumentSize=function(){var a;a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))};b.getWindowSize=function(){var a,b;a=b=0;"number"===typeof window.innerWidth?(b=window.innerWidth,a=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?
(b=document.documentElement.clientWidth,a=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(b=document.body.clientWidth,a=document.body.clientHeight);return{height:a,width:b}};b.getTabsHTML=function(a,b){var c,d,f,e,g,h,k;e=[];c=[];if(a&&1<a.length){e.push("<ul class='clay-tabs'>");g=function(a,d){var f;f=b+"-tab-"+a;e.push("<li id='"+f+"'"+(d.focused?" class='clay-tab-focus'":"")+">");e.push("\t<a href='#'>"+d.name+"</a>");e.push("</li>");
return c.push({id:f,handler:function(a){a.preventDefault();if(a=document.querySelector("#"+b+" .clay-tab-focus"))a.className="";if(a=document.getElementById(f))a.className="clay-tab-focus";return d.callback()}})};d=h=0;for(k=a.length;h<k;d=++h)f=a[d],g(d,f);e.push("</ul>")}return{html:e,events:c}};b.insertIframe=function(a,b){var c;c=document.createElement("iframe");f.focusedFrame=c;c.src=a.src;"cocoonjs"===l.platform&&-1!==c.src.indexOf("?")?c.src+="&cocoonjs":"cocoonjs"===l.platform?c.src+="?cocoonjs":
"object"===typeof e&&e.versions&&e.versions["node-webkit"]&&-1!==c.src.indexOf("?")?c.src+="&node-webkit":"object"===typeof e&&e.versions&&e.versions["node-webkit"]&&(c.src+="?node-webkit");c.frameBorder="";c.id=a.id;c.className=a["class"];d.offline?b.innerHTML="You must connect to the internet to do this":a.order&&"prepend"===a.order?b.insertBefore(c,b.firstChild):b.appendChild(c);return k.addEvent("message",function(a){var c;c="https://"+h.DOMAIN;if(~h.BASEURL.indexOf(a.origin)||~c.indexOf(a.origin))if(a=
JSON.parse(a.data),a.makeVisible&&b)return b.className=b.className.replace(" clay-loading","")})};b.createModal=function(a,c){var d,f,e,g,s,m,n,B,x,y,w,z,C,v=this;null==a&&(a={});null==c&&(c=!1);if(!h.options.hideUI)if(C=a.title||"",m=a.html||"",n=a.id||"clay-modal-wrapper",f=a["class"]||a.id,g=a.events||[],w=a.tabs||null,y=a.subnav||"powered by <a href='"+h.BASEURL+"' target='_blank'>clay.io</a>",B=a.iframe||null,e=h.options&&h.options.debug,d=a.DOMid||h.options.DOMid,document.getElementById(n))this.updateModal(a,
c);else return x="",a.width&&("number"===typeof a.width&&(a.width+="px"),x+="max-width: "+a.width+";"),a.height&&("number"===typeof a.height&&(a.height+="px"),x+="height:"+a.height+";"),z=[],w&&1<w.length&&(s=this.getTabsHTML(w,n),z=s.html,g=g.concat(s.events)),s=[],d?s.push("<div id='"+n+"' class='clay-custom-wrapper'>"):(s.push("<div class='clay-overlay'>"),s.push("\t<div class='clay-sticky-cell'>"),s.push("\t\t<div class='clay-modal-wrapper "+f+(w&&w.length?" clay-tabs-wrapper":"")+"' id='"+n+
"' style='"+x+"'>"),s.push("\t\t\t<div id='"+n+"-tabs-wrapper'>"),z&&s.push(z.join("")),s.push("\t\t\t</div>"),s.push("\t\t\t<div class='clay-modal clearfix' id='"+n+"-inner'>"),s.push("\t\t\t\t<div id='"+n+"-header' class='clay-header'>"),s.push("\t\t\t\t\t<h2 class='clay-banner'>"),s.push("\t\t\t\t\t\t<span id='"+n+"-title'>"+C+"</span>"),e&&s.push("\t\t\t\t\t\t<span class='clay-debug-mode'>Debug Mode</span>"),s.push("\t\t\t\t\t</h2>"),s.push("\t\t\t\t\t<h3 class='clay-powered-by' id='clay-powered-by'>"+
y+"</h3>"),s.push("\t\t\t\t</div>"),s.push("\t\t\t\t<a href='#' class='clay-close' id='"+n+"-close'>&times;</a>"),s.push("\t\t\t\t<div class='clay-content-scroll-hide'>")),s.push("\t\t\t\t\t<div class='clay-content' id='"+n+"-content'>"),s.push("\t\t\t\t\t\t<div class='clay-content-inner' id='"+n+"-content-inner'>"),s.push("string"===typeof m?m:m.join("")),s.push("\t\t\t\t\t\t</div>"),s.push("\t\t\t\t\t</div>"),d||(s.push("\t\t\t\t</div>"),s.push("\t\t\t</div>"),s.push("\t\t\t<div class='clay-scroll-lane'><div class='clay-scroll-drag'></div></div>"),
s.push("\t\t</div>"),s.push("\t</div>")),s.push("</div>"),h.log("Creating the modal"),this.addToContainer(s,function(){var d,f,e;if(!h.options.hideUI){v.modalsOpened[n]=!0;"cocoonjs"===l.platform&&1<=v.modalsOpen()&&(h.log("Showing CocoonJS WebView (Modal ID: "+n+")"),CocoonJS.App.forwardAsync("clay_modal_count( "+b.modalsOpen()+" );"),CocoonJS.App.show(0,0));f=document.getElementById(n+"-content-inner");a.loading&&(f.className+=" clay-loading");e=function(a){a.preventDefault();b.closeModal(n);return!1};
if(d=document.getElementById(n+"-close"))k.addEvent("touchstart",e,!1,!1,d,n),k.addEvent("click",e,!1,!1,d,n);B&&v.insertIframe(B,f);d=document.getElementById(n);try{d.parentNode.parentNode.className+=" clay-fade-in"}catch(q){}v.centerModal(n);g&&g.length&&v.handleEvents(g);if(c)return c()}},d),c=function(a){a=a||window.event;return 27===a.keyCode?v.closeModal(n):"skipRemoval"},k.addEvent("keydown",c,!1,!0,window,n)};b.updateModal=function(a,b){var c,d,f,e,g,k,l;null==a&&(a={});null==b&&(b=!1);if(!h.options.hideUI){e=
a.title||"";c=a.html||"";g=a.id||"clay-modal-wrapper";l=a.subnav||"powered by <a href='"+h.BASEURL+"' target='_blank'>clay.io</a>";k=a.iframe||null;f=a.events||[];(d=document.getElementById(g+"-title"))&&e&&(d.innerHTML=e);if(a.tabs&&1<a.tabs.length){e=this.getTabsHTML(a.tabs,g);d=e.html;f=f.concat(e.events);if(e=document.getElementById(g))e.className+=" clay-tabs-wrapper";e=document.getElementById(g+"-tabs-wrapper");e.innerHTML=d.join("")}if(d=document.getElementById("clay-powered-by"))d.innerHTML=
l;if(d=document.getElementById(g+"-content-inner"))d.innerHTML="string"===typeof c?c:c.join("");c=document.getElementById(g+"-content-inner");k&&this.insertIframe(k,c);!1===a.loading?c&&(c.className=c.className.replace(" clay-loading","")):!0===a.loading&&(c=document.getElementById(g+"-content-inner"),c.className+=" clay-loading");b&&b();h.log("Updating modal ("+this.modalsOpen()+" open)");f&&f.length&&this.handleEvents(f);return this.centerModal(g)}};b.centerModal=function(a){var c,d,f,e,g,k,l,m,
n,x,y,w;if(!h.options.hideUI&&(g=document.getElementById(a)||document.querySelector(".clay-modal-wrapper"))&&document.querySelector(".clay-overlay")){f=document.getElementById(a+"-inner")||document.querySelector(".clay-modal");k=document.getElementById(a+"-content")||document.querySelector(".clay-content");g.style.height="auto";k&&(k.style.height="auto");l=parseInt(k.style.paddingTop)||78;l-=10;d=document.getElementById(a+"-header")||document.querySelector(".clay-header");x=(e=document.querySelector(".clay-tabs"))?
34:0;w=b.getWindowSize().height;document.querySelector(".clay-overlay").style.height=window.innerHeight+"px";if(e=g.querySelector(".clay-scroll-lane"))e.style.display="none",e.style.top=d.offsetHeight+3+"px",c=e.querySelector(".clay-scroll-drag");y=(w-g.offsetHeight-x)/2;8>=y&&(d=d.offsetHeight,d=w-d-x-22+l,k&&(k.style.height=d+"px"));k.scrollTop=0;m=(k.offsetHeight-5-l)/k.scrollHeight;if(k.scrollHeight>k.offsetHeight+2)return e.style.display="block",d=Math.round(m*k.offsetHeight),c.style.height=
d+"px",(n=document.getElementById(a+"-scroll-indicator"))?n.style.display="block":(n=document.createElement("div"),n.id=a+"-scroll-indicator",n.className="clay-scroll-indicator",n.onclick=function(){return k.scrollTop+=50},n.ontouchstart=function(){return k.scrollTop+=50},a=document.createElement("img"),a.src=h.BASEURL+"/images/api/down.png",n.appendChild(a),f.appendChild(n)),k.className="clay-content clay-content-scroll",this.SCROLL_LISTENER&&k.removeEventListener(this.SCROLL_LISTENER),this.SCROLL_LISTENER=
k.addEventListener("scroll",function(a){y=Math.round(k.scrollTop*m);c.style.top=y+"px";if(1>=Math.abs(parseInt(k.scrollTop)+parseInt(k.offsetHeight)-k.scrollHeight)&&"none"!==n.style.display)return n.style.display="none";if(parseInt(k.scrollTop)+parseInt(k.offsetHeight)<k.scrollHeight&&"none"===n.style.display)return n.style.display="block"}),f=function(a){var b,d;a.stopPropagation();a.preventDefault();if(!0!==a.handled)return k=g.querySelector(".clay-content"),c=g.querySelector(".clay-scroll-drag"),
b=c.offsetHeight-l,d=a.offsetY||a.layerY||a.touches[0].clientY,d/=k.offsetHeight,d*=k.scrollHeight,k.scrollTop=d<k.scrollTop?d+b/2:d-b/2,a.handled=!0},this.jump1&&e.removeEventListener(this.jump1),this.jump2&&e.removeEventListener(this.jump2),this.jump1=e.addEventListener("mousedown",f),this.jump2=e.addEventListener("touchstart",f);k.className="clay-content clay-content-no-scroll";if(n=document.getElementById(a+"-scroll-indicator"))return n.style.display="none"}};b.scroller=null;b.handleEvents=function(a){var b,
c,d,f,e;e=[];for(c in a)if(d=a[c],b=document.getElementById(d.id))f=d.once||!1,d.action&&"click"!==d.action||(d.action="fastclick"),e.push(k.addEvent(d.action,d.handler,!1,f,b));return e};b.notificationId=0;b.notificationsWrapper=!1;b.createNotification=function(a){var c,d,e,g,k,m,n,D=this;null==a&&(a={});if(!h.options.hideUI&&(m=a.title||"",d=a.html||"",e=a.icon||!1,n=a.type||"notification",g=a.id||b.notificationId++,c=a.delay||3E3,a=h.options&&h.options.debug,k=[],k.push("<div class='clay-notification clay-"+
n+"' id='clay-"+n+"-"+g+"'>"),k.push("\t<div class='clay-notification-header clay-"+n+"-header'>"),k.push(m),a&&k.push("\t\t\t<span class='clay-debug-mode'>Debug</span>"),k.push("\t</div>"),k.push("\t<div class='clay-notification-content clay-"+n+"-content'>"),e&&k.push("\t\t<img src='"+e+"' class='clay-notification-icon clay-"+n+"-icon' />"),e&&k.push("\t\t\t<span class='clay-notification-description clay-"+n+"-description'>"),k.push(d),e&&k.push("\t\t\t</span>"),k.push("\t\t</div>"),k.push("<a href='#' id='clay-"+
n+"-"+g+"-close' class='clay-notification-close clay-"+n+"-close'>&times;</a>"),k.push("</div>"),this.notificationsWrapper||(this.notificationsWrapper=document.createElement("div"),this.notificationsWrapper.id="clay-notifications-wrapper",this.notificationsWrapper.className="clay-notifications-wrapper",f.container.appendChild(this.notificationsWrapper)),this.addToContainer(k,function(){var a;if(a=document.getElementById("clay-"+n+"-"+g+"-close"))a.onclick=function(){b.closeNotification("clay-"+n+
"-"+g);return!1};a=document.getElementById("clay-"+n+"-"+g);try{a.className+=" clay-fade-in"}catch(c){}D.notificationsOpened["clay-"+n+"-"+g]=!0;if("cocoonjs"===l.platform&&1<=D.notificationsOpen()&&0===D.modalsOpen())return h.log("Showing CocoonJS WebView"),a=window.devicePixelRatio||1,CocoonJS.App.show((window.innerWidth-300)*a,0,300*a,120*a)},this.notificationsWrapper),"clay"!==h.Player.clearance&&"achievement"===n&&(c=5E3),0<c))return setTimeout(function(){return D.closeNotification("clay-"+n+
"-"+g)},c)};b.closeNotification=function(a){var b,c=this;null==a&&(a="0");if(!h.options.hideUI){(b=document.getElementById(a))&&delete this.notificationsOpened[a];"cocoonjs"===l.platform&&0===this.modalsOpen()&&0===this.notificationsOpen()&&(h.log("Hiding CocoonJS Webview"),CocoonJS.App.hide());try{document.getElementById(a).className+=" clay-fade-out"}catch(d){}return setTimeout(function(){return c.removeElement(a)},300)}};b.showPopupNotifier=function(a){return b.createNotification({id:"popup-"+
a,delay:"0",title:"Popup Blocker",html:"We're opening a window to "+a+". Be sure your popup blocker allows popups from Clay.io"})};b.hidePopupNotifier=function(a){return b.closeNotification("clay-notification-popup-"+a)};b.addToContainer=function(a,b,c){var d,e;null==b&&(b=!1);null==c&&(c=!1);if(!h.options.hideUI&&(e=document.createElement("div"),e.className="clay","object"===typeof a&&"[object Array]"!==Object.prototype.toString.call(a)?e.appendChild(a):e.innerHTML+="string"===typeof a?a:a.join(""),
c&&"string"===typeof c&&(d=document.getElementById(c))?d.appendChild(e):c?c.appendChild(e):f.container&&f.container.appendChild(e),b))return b()};b.removeElement=function(a){if(!h.options.hideUI){"string"===typeof a&&(a=document.getElementById(a));try{if(a&&a.parentNode)return a.parentNode.removeChild(a)}catch(b){}}};b.openWindow=function(a,b,c){return"kik"===h.Environment.platform?cards.open(a):navigator&&navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(a,{openExternal:!0}):"amazon"===
l.platform&&4>l.version?this.createModal({id:"link-continue",title:"Continue...",html:"<div style='margin: 10px 0;'><a href='"+a.replace("'","")+"' target='_blank' class='button' style='position: relative; z-index: 999999;'>Click here to continue</a></div>"}):window.open(a,b,c)};return b}();k.addEvent("resize",function(){var b,a,d;a=c.modalsOpened;d=[];for(b in a)d.push(c.centerModal(b));return d});c.Menu=function(){function b(){}b.swipeMenu=null;b.swipeMenuState="hidden";b.init=function(a){var b,
d,e,g,h,l,m,n;"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","Swipe Bar",window.location.href,"open"]);b=document.createElement("div");b.id="clay-swipe-menu";c.Menu.swipeMenu=b;d=document.createElement("div");d.id="clay-swipe-menu-button";e=document.createElement("div");e.id="clay-swipe-menu-button-inner";d.appendChild(e);c.Menu.swipeMenuContents=document.createElement("div");c.Menu.swipeMenuContents.id="clay-swipe-menu-contents";e=document.createElement("h2");e.innerHTML="Clay.io Menu";g=document.createElement("ul");
g.className="clay-ul";if(a.items)for(n=a.items,h=function(a){var b,d,f;f=document.createElement("li");b=document.createElement("a");b.innerHTML="<span>"+a.title+"</span>";"Share This"===a.title&&(b.className="clay-share-this");a.handler&&(d=function(b){b.preventDefault();c.Menu.hideSwipe();"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","Swipe Bar","Action",a.title]);return a.handler(b)},k.addEvent("fastclick",d,!1,!1,b));f.appendChild(b);return g.appendChild(f)},l=0,m=n.length;l<m;l++)a=n[l],
h(a);c.Menu.swipeMenuContents.appendChild(e);c.Menu.swipeMenuContents.appendChild(g);b.appendChild(d);b.appendChild(c.Menu.swipeMenuContents);f.container&&f.container.appendChild(b);c.Menu.wrapperOverlay=document.createElement("div");c.Menu.wrapperOverlay.id="clay-wrapper-overlay";c.Menu.wrapperOverlay.style.display="none";f.container.appendChild(c.Menu.wrapperOverlay);return c.Menu.ready()};b.crossPromotionVisible=!1;b.addCrossPromotion=function(){var a,b;a=document.createElement("div");a.className=
"clay-cross-promotion";b=[];b.push("<h2>Suggestions</h2>");b.push("<ul id='clay-cross-promotion-icons' class='clay-ul'><li>Loading...</li></ul>");k.socketListen("ui",this,!1,!1);k.socketEmit("crosspromotion","grabIcons");a.innerHTML=b.join("");c.Menu.swipeMenuContents.appendChild(a);return c.Menu.crossPromotionVisible=!0};b.grabIconsCallback=function(a){var b,c,d,f,e,g,h,m,n,x;e=document.getElementById("clay-cross-promotion-icons");e.innerHTML="";n=a.icons;g=function(a,b){var c;c=function(d){var f=
this;d.preventDefault();d=function(){if("Poker!"===a.name)f.children[1].innerHTML="Coming soon!",k.removeEvent("click",c,!1,f),k.removeEvent("touchstart",c,!1,f);else return window.location.href=b.href};return"undefined"!==typeof _gaq?(_gaq.push(["_trackEvent","Swipe XPromotion",a.url,"Swipe Ad Click"]),_gaq.push(d)):d()};return k.addEvent("fastclick",c,!1,!1,b)};x=[];h=0;for(m=n.length;h<m;h++)a=n[h],d=document.createElement("li"),b=document.createElement("a"),b.className="clay-cross-promotion-icon",
b.href=l.normalizeURL(a.url),c=document.createElement("img"),c.src=a.icon,f=document.createElement("span"),f.innerHTML=a.name,b.appendChild(c),b.appendChild(f),"undefined"!==typeof _gaq&&_gaq.push(["_trackEvent","Swipe XPromotion",a.url,"Swipe Ad View"]),g(a,b),d.appendChild(b),x.push(e.appendChild(d));return x};b.ready=function(){var a,b;if(a=document.getElementById("clay-swipe-menu-button"))b=function(a){a.preventDefault();return"hidden"===c.Menu.swipeMenuState?c.Menu.showSwipe():c.Menu.hideSwipe()},
k.addEvent("fastclick",b,!1,!1,a),k.addEvent("fastclick",b,!1,!1,c.Menu.wrapperOverlay);return setTimeout(c.Menu.resize,0)};b.resize=function(){return c.Menu.swipeMenu.style.minHeight=window.innerHeight+"px"};b.showSwipe=function(){c.Menu.swipeMenu.style.right=0;c.Menu.wrapperOverlay.style.display="block";c.Menu.swipeMenuState="visible";"ios"===l.os&&5>l.version&&(c.Menu.swipeMenu.style.top=window.scrollY+"px",c.Menu.swipeMenu.style.position="absolute",this.scrollListenerAdded||window.addEventListener("scroll",
function(){return c.Menu.swipeMenu.style.top=window.scrollY+"px"}),this.scrollListenerAdded=!0);c.Menu.crossPromotionVisible||c.Menu.addCrossPromotion();"undefined"!==typeof cards&&cards.browser&&cards.browser.back&&cards.browser.back(c.Menu.hideSwipe);return!1};b.hideSwipe=function(){c.Menu.swipeMenu.style.right="-200px";c.Menu.wrapperOverlay.style.display="none";c.Menu.swipeMenuState="hidden";"undefined"!==typeof cards&&cards.browser&&cards.browser.unbindBack&&cards.browser.unbindBack(c.Menu.hideSwipe);
return!1};b.hasCSSProperty=function(a){return window.getComputedStyle?window.getComputedStyle(document.body,null)[a]:document.body.currentStyle[a]};b.supportOverflowScrolling=function(){return this.hasCSSProperty("overflow-scrolling")||this.hasCSSProperty("-webkit-overflow-scrolling")||this.hasCSSProperty("-moz-overflow-scrolling")||this.hasCSSProperty("-o-overflow-scrolling")};return b}();m.exports=c}).call(this)},{"../features/environment":6,"../includes/clay":28,"../includes/events":32,"../includes/local":34,
"../includes/offline":35,__browserify_process:36}],25:[function(g,m,n){},{}],26:[function(g,m,n){(function(){var e;e=function(){function e(){}e.callbacks={};e.add=function(e){var g;return"function"===typeof e?(g=Math.random(),this.callbacks[g]={fn:e,obj:arguments.callee},g):!1};e.execute=function(e,g){var f;null==g&&(g=[]);if(e&&this.callbacks[e])return f=this.callbacks[e],f.fn.apply(f.obj,g),delete this.callbacks[e]};return e}();m.exports=e}).call(this)},{}],27:[function(g,m,n){(function(){var e,
h;h=g("../includes/clay");e=function(){function e(){}e.validCall=function(){var e;if(h.options&&h.options.debug||"cocoonjs"===h.Environment.platform)return!0;e=!1;console&&console.profile&&console.profiles&&(console.profile(),console.profileEnd(),e=0<console.profiles.length);e&&h.log("This cannot be run with the console open",!0);return!e};return e}();m.exports=e}).call(this)},{"../includes/clay":28}],28:[function(g,m,n){(function(){var e;"undefined"===typeof window.Clay?window.fromNode?e={}:window.Clay=
{}:e=window.Clay;e.VERSION=1;e.PROTOCOL||(e.PROTOCOL=document&&document.location&&("https:"===document.location.protocol||"chrome-extension:"===document.location.protocol)?"https://":"http://");e.BASEURL||(e.BASEURL=e.PROTOCOL+"clay.io");e.DOMAIN||(e.DOMAIN="clay.io");"http://"===e.PROTOCOL?(e.API_CSS_PATH=e.PROTOCOL+"cdn.clay.io/api.css",e.SOCKET_IO_PATH=e.PROTOCOL+"cdn.clay.io/socket.io.js"):(e.API_CSS_PATH=e.PROTOCOL+"clay.io/api/api.css",e.SOCKET_IO_PATH=e.PROTOCOL+"clay.io/api/socket.io.js",
e.SOCKET_PORT=846,e.SOCKET_ADDRESS=e.PROTOCOL+e.DOMAIN+":"+e.SOCKET_PORT);e.options||(e.options={debug:!1});e.readyFunctions||(e.readyFunctions=[]);e.ready||(e.ready=function(g){return e.readyFunctions.push(g)});e.loadFunctions||(e.loadFunctions=[]);e.load||(e.load=function(g){return e.loadFunctions.push(g)});e.orientation=window.orientation;e.publisherID=0;e.source=!0;e.SOCKET_ADDRESS||("https://"===e.PROTOCOL?(e.SOCKET_PORT=846,e.SOCKET_ADDRESS=e.PROTOCOL+e.DOMAIN+":"+e.SOCKET_PORT):(e.SOCKET_PORT=
443,e.SOCKET_ADDRESS=e.PROTOCOL+"api."+e.DOMAIN));e.log=function(g,l){null==l&&(l=!1);if("undefined"!==typeof console&&(l||e.options&&e.options.debug))return console.log(g)};e.loaded=!1;e.isReady=!1;e.Player={loggedIn:!1,clearance:!1};m.exports=e}).call(this)},{}],29:[function(g,m,n){(function(){var e,h,l,k,f,d,c,b,a,r;e=g("../includes/clay");b=g("../includes/local");a=g("../includes/offline");l=g("../includes/dependencies");f=g("../includes/events");k=g("../features/environment");d=g("../features/game");
r=g("../features/player");c=g("../features/kik");h=function(){function g(){}g.domAndSocketLoaded=function(){var a;e.loaded=!0;if(r){r.socketListen();if(a=localStorage.getItem("clayLogin"))a=JSON.parse(a),r.sendLogin(a),r.localStorageChecked=!0;"kik"===e.Environment.platform&&b.callReadies()}d.set({key:e.gameKey,options:e.options});if("kik"===k.platform&&!r.loggedIn)return setTimeout(function(){if(!r.loggedIn)return c.grabAnonymousToken()},4E3)};g.loadSocketIO=function(){var c,d,f=this;if(a.offline)return e.log("Offline Mode"),
e.loaded=!0,b.callReadies();if(window.io&&window.io.connect||e.io&&e.io.connect)return this.connect();if(e.options&&e.options.waitForSocketIO)return d=0,c=function(){if(window.io&&window.io.connect||e.io&&e.io.connect)return f.connect();if(100>d)return setTimeout(c,200),d++},c();if(k.externalResourcesAllowed)return e.io={},window.socketModule={exports:e.io},l.loadScript(e.SOCKET_IO_PATH,this.connect),e.log("Socket.IO Loading...")};g.checkIfReady=function(){var a,c=this;return b.DOMLoaded?this.domAndSocketLoaded():
a=setInterval(function(){e.log("waiting");if(b.DOMLoaded)return clearInterval(a),c.domAndSocketLoaded()},50)};g.connect=function(){var c;e.io=e.io&&e.io.connect?e.io:window.clayio;e.io=e.io&&e.io.connect?e.io:window.io;clearTimeout(e.loadTimeout);b.socket=e.io.connect(e.SOCKET_ADDRESS,{"force new connection":!0,port:e.SOCKET_PORT,secure:"https://"===e.PROTOCOL,reconnect:!0,"reconnection delay":500,"max reconnection attempts":10});c=0;e.log("Connecting to socket.io");f.socketListen("connect",function(){e.log("Socket connected");
if(!e.loaded)return g.checkIfReady();if(50>c)return r&&r.tryLogin(),d.set({key:e.gameKey,options:e.options}),c++},!1,!1);return f.socketListen("error",function(){e.log("Could not connect to socket.io");a.offline=!0;e.loaded=!0;return b.callReadies()},!1,!1)};return g}();m.exports=h}).call(this)},{"../features/environment":6,"../features/game":8,"../features/kik":11,"../features/player":16,"../includes/clay":28,"../includes/dependencies":31,"../includes/events":32,"../includes/local":34,"../includes/offline":35}],
30:[function(g,m,n){},{}],31:[function(g,m,n){(function(){var e;e=function(){function e(){}e.dependencies={};e.addDependency=function(e,g){if(this.dependencies[e]&&this.dependencies[e].loaded)return g();if(this.dependencies[e])return this.loadScript(this.dependencies[e].src,g)};e.loadScript=function(e,g){var f,d;f=document.createElement("script");f.type="text/javascript";f.src=e;f.onreadystatechange=function(){if("complete"===this.readyState)return g()};f.onload=function(){return g()};d=document.getElementsByTagName("script")[0];
return d.parentNode.insertBefore(f,d)};return e}();m.exports=e}).call(this)},{}],32:[function(g,m,n){(function(){var e,h,l;e=g("../includes/clay");l=g("../includes/local");h=function(){function g(){}g.groups={};g.addEvent=function(f,d,c,b,a,e){var g,h,k,l=this;null==c&&(c=!1);null==b&&(b=!1);null==a&&(a=window);null==e&&(e=!1);"fastclick"===f&&(h=!1,e||(e="fastclick"),k=d,d=function(a){if(!h)return h=!0,a.preventDefault(),k.call(this,a),setTimeout(function(){return h=!1},100)},g=arguments,g[0]="touchstart",
g[1]=d,g[5]=e,this.addEvent.apply(this,arguments),f="click");b&&(k=d,d=function(d){var g,h,m,q;g=k.call(l,d);if("skipRemoval"!==g&&!1!==e&&l.groups[e]){q=l.groups[e];h=0;for(m=q.length;h<m;h++)g=q[h],l.removeEvent(g.type,g.listener,g.useObject,g.obj);return delete l.groups[e]}if("skipRemoval"!==g&&b)return l.removeEvent(f,arguments.callee,c,a)});!1!==e&&(this.groups[e]||(this.groups[e]=[]),this.groups[e].push({type:f,listener:d,useObject:c,obj:a}));return a.addEventListener?a.addEventListener(f,d,
c):a.attachEvent?a.attachEvent("on"+f,d,c):a["on"+f]=d};g.removeEvent=function(f,d,c,b){null==c&&(c=!1);null==b&&(b=window);return b.removeEventListener?b.removeEventListener(f,d,c):b.detachEvent?b.detachEvent("on"+f,d,c):b["on"+f]=null};g.triggerEvent=function(f,d){var c;null==d&&(d=window);document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(f,!0,!0)):(c=document.createEventObject(),c.eventType="on"+f);c.eventName=f;return document.createEvent?d.dispatchEvent(c):d.fireEvent(c.eventType,
c)};g.socketListen=function(f,d,c,b){var a,g=this;null==b&&(b=!0);if(e.loaded||"connect"===f||"error"===f){if(c=f,d&&d.instanceId&&(f+="-"+d.instanceId),a=function(a){var c,h;e.log("received: "+f+(a?" method: "+a.method:""));h=a&&a.data?a.data:null;c=a&&a.callbackId?a.callbackId:null;if(a&&a.method&&"function"===typeof d[a.method])d[a.method](h,c);else if("string"===typeof d)e[d][a.method](h,c);else"function"===typeof d&&d(h,c);if(b)return g.socketRemove(f,arguments.callee)},l.socket.on(f,a),f!==
c)return l.socket.on(c,a)}else e.log("Clay.io has not connected to its backend yet. Use Clay.ready() before this call, or email us if you think the issue is on our end: contact@clay.io",!0)};g.socketRemove=function(f,d){return l.socket.removeListener(f,d)};g.socketEmit=function(f,d,c,b,a){null==d&&(d="");null==c&&(c={});null==b&&(b=!1);null==a&&(a=!1);e.callsThisMinute++;if(e.callsThisMinute>=l.maxCallsPerMinute)e.callsThisMinute===l.maxCallsPerMinute&&UI.createNotification({title:"Max Calls Reached",
html:"This game has reached the maximum number of calls per minute ("+l.maxCallsPerMinute+")"});else if(e.loaded)return e.log("sending: "+f+" instance, method: "+d+": "+b),d={method:d,data:c,callbackId:a,instanceId:b},l.socket.emit(f,d)};return g}();h.addEvent("message",function(g){var f;try{f=JSON.parse(g.data)}catch(d){f=!1}if(f&&"orientationchange"===f.name)return window.innerHeight=parseInt(f.height),window.innerWidth=parseInt(f.width),g=parseInt(f.orientation),isNaN(g)||(window.orientation=g,
e.orientation=g),h.triggerEvent("orientationchange");if(f&&"orientation"===f.name){if(g=parseInt(f.orientation),!isNaN(g))return window.orientation=g,e.orientation=g}else if(f&&"setpublisher"===f.name)return e.publisherID=f.publisherId});m.exports=h}).call(this)},{"../includes/clay":28,"../includes/local":34}],33:[function(g,m,n){(function(){var e,h,l,k,f,d,c;e=g("../includes/clay");f=g("../includes/local");h=g("../includes/connect");l=g("../features/environment");k=g("../features/game");d=g("../features/player");
c=g("../features/ui");!e.ignoreSocketIO&&f.loadNow&&h.loadSocketIO();f.ready(function(){var b,a,g,m;f.socket||e.ignoreSocketIO||(e.loadTimeout=setTimeout(function(){k.failedLoadCallback();c.createNotification({title:"Error Connecting",html:"Email Clay.io support if this message continues to occur contact@clay.io ("+e.SOCKET_PORT+")"});return e.ready(function(){return c.createNotification({title:"Connected",html:"Clay.io has connected!"})})},12E3));f.container=document.createElement("div");f.container.id=
"clay";f.container.className="clay clay-reset";l.platformSpecifics();b=document.getElementsByTagName("body")[0];b.appendChild(f.container);b="";e.documentReadyCheck=!0;if(e.loadFunctions&&0<e.loadFunctions.length)for(m=e.loadFunctions,a=0,g=m.length;a<g;a++)b=m[a],"function"===typeof b&&b();e.load=function(a){return a()};f.loadNow||h.loadSocketIO();d&&d.tryLogin();b={name:"orientation"};window.parent&&window.parent.postMessage&&window.parent.postMessage(JSON.stringify(b),"*");l.externalResourcesAllowed&&
!e.LocalCSS&&(b=document.createElement("link"),b.rel="stylesheet",b.href=e.API_CSS_PATH,a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(b,a));e.callsThisMinute=0;setInterval(function(){return e.callsThisMinute=0},6E4);return f.DOMReady=!0})}).call(this)},{"../features/environment":6,"../features/game":8,"../features/player":16,"../features/ui":24,"../includes/clay":28,"../includes/connect":29,"../includes/local":34}],34:[function(g,m,n){(function(){var e,h;e=g("../includes/clay");
h={loadNow:"undefined"!==typeof window.Clay,maxCallsPerMinute:80,DOMLoaded:!1,DOMReady:!1,readiesCalled:!1,callReadies:function(){var g,h,f,d;e.isReady=!0;if(!this.readiesCalled){this.readiesCalled=!0;e.readyFunction&&(e.readyFunctions=[e.readyFunction]);if(e.readyFunctions&&0<e.readyFunctions.length)for(d=e.readyFunctions,h=0,f=d.length;h<f;h++)g=d[h],"function"===typeof g&&g();return e.ready=function(c){return c()}}},xdr:function(g,h,f){var d,c,b;if("withCredentials"in new XMLHttpRequest){if(d=
XMLHttpRequest)return c=function(){if(4===b.readyState)return f(b.responseText)},b=new d,b.open("POST",e.PROTOCOL+"//clay.io/ajax/"+g,!0),b.onreadystatechange=c,b.withCredentials=!0,b.send(this.objToParams(h))}else this.jsonp(g,h,f),e.log("Cross-domain XHR not supported, falling back to JSONP",!0)},jsonp:function(g,h,f){var d;d="jsonp"+(new Date).getTime();this[d]=function(c){this[d+"callback"](c);this.removeJsonp(d);this[d+"callback"]=null;return this[d]=null};this[d+"callback"]=f;if(e.Environment.externalResourcesAllowed)return f=
document.createElement("script"),f.type="text/javascript",f.src=e.PROTOCOL+"//clay.io//ajax/"+g+"?time="+(new Date).getTime()+"&callback=Clay."+d+"&"+this.objToParams(h),f.id="clay-callback-"+d,g=document.getElementsByTagName("script")[0],g.parentNode.insertBefore(f,g)},removeJsonp:function(e){if(e=document.getElementById("clay-callback-"+e))return e.parentNode.removeChild(e)},focusedFrame:null,sendMessageToFrame:function(g){return this.focusedFrame?(g=JSON.stringify(g),this.focusedFrame.contentWindow.postMessage(g,
"*")):e.log("Attempting to post message to frame that doesn't exist")},objToParams:function(e){var g,f;f=[];for(g in e)e.hasOwnProperty(g)&&f.push(g+"="+encodeURIComponent(e[g]));return f.join("&")},objectLength:function(e){var g,f;f=0;for(g in e)e.hasOwnProperty(g)&&f++;return f},htmlEntities:function(e){return String(e).replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},pad:function(e,g){var f;for(f=""+e;f.length<g;)f="0"+f;return f},formatTime:function(e,
g){var f,d;d=this.curTime-e;return 2678400<d?1===(f=Math.floor(d/2629742.39712))?f+" month ago":f+" months ago":86400<d?1===(f=Math.floor(d/86400))?f+" day ago":f+" days ago":3600<d?1===(f=Math.floor(d/3600))?f+" hour ago":f+" hours ago":60<d?1===(f=Math.floor(d/60))?f+" minute ago":f+" minutes ago":"less than 1 minute ago"},getGameLink:function(){try{if(window.top&&window.top.location&&window.top.location.href)return window.top.location.href}catch(e){}return window.location.href}};h.ready=function(){var g,
k,f,d,c,b;e.log("Local Ready Called");g=function(){b?document.removeEventListener("DOMContentLoaded",g,!0):"complete"!==document.readyState&&"interactive"!==document.readyState||document.detachEvent("onreadystatechange",g);return f()};d=function(){if(!h.DOMLoaded){try{document.documentElement.doScroll("left")}catch(a){window.setTimeout(arguments_.callee,15);return}return f()}};f=function(){var a,b,c;if(!h.DOMLoaded){h.DOMLoaded=!0;b=k.length;a=0;e.log("Local Ready Fired");for(c=[];a<b;)k[a].call(document),
c.push(a++);return c}};b=!!document.addEventListener;c=h.DOMLoaded=!1;k=[];if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState)f();else if(b)document.addEventListener("DOMContentLoaded",g,!0),window.addEventListener("load",f,!1);else{document.attachEvent("onreadystatechange",g);window.attachEvent("onload",f);try{c=null===window.frameElement}catch(a){}document.documentElement.doScroll&&c&&d()}return function(a){return h.DOMLoaded?setTimeout(function(){return a.call(document)},
0):k.push(a)}}();m.exports=h}).call(this)},{"../includes/clay":28}],35:[function(g,m,n){(function(){var e,h,l,k;e=g("../includes/clay");h=g("../includes/events");k=g("../features/ui");l=function(){function f(){}f.offline=!navigator.onLine;f.offlineData=localStorage.clayOfflineData?JSON.parse(localStorage.clayOfflineData):{};f.showWarning=function(d){null==d&&(d="do that");return k.createNotification({title:"Must be online",html:"You must be connected to the internet to "+d+"!"})};f.save=function(d,
c,b,a,f){var g,h,k;null==f&&(f=!1);e.log("Saving: "+b+" : "+a);(g=this.offlineData)[d]||(g[d]={});f?(h=this.offlineData[d])[c]||(h[c]={}):(k=this.offlineData[d])[c]||(k[c]=[]);f?this.offlineData[d][c][b]=a:this.offlineData[d][c].push(a);return localStorage.clayOfflineData=JSON.stringify(this.offlineData)};f.fetch=function(d,c,b){return this.offlineData[d]&&this.offlineData[d][c]&&this.offlineData[d][c][b]?this.offlineData[d][c][b]:null};f.sync=function(){var d,c,b,a,f,g,k,l;if(!this.offline){e.log("Synchronizing Clay.io Data");
l=this.offlineData;for(g in l)for(a in k=l[g],f=!1,k){d=k[a];for(b in d)c=d[b],"achievement"===g&&"award"===a?(f=c.noUI=!0,h.socketEmit("achievement","award",c)):"leaderboard"===g&&"post"===a?(f=c.noUI=!0,h.socketEmit("leaderboard","post",c)):"user"===g&&"saveData"===a?(f=!1,h.socketEmit("user","userData",c)):"stats"===g&&"log"===a&&(f=!0,h.socketEmit("stats","logFromAPI",c));f&&delete this.offlineData[g]}return localStorage.clayOfflineData=JSON.stringify(this.offlineData)}};return f}();e.ready(function(){return l.sync()});
window.addEventListener("online",function(){return l.sync()});m.exports=l}).call(this)},{"../features/ui":24,"../includes/clay":28,"../includes/events":32}],36:[function(g,m,n){g=m.exports={};g.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(e){return window.setImmediate(e)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var e=[];window.addEventListener("message",function(g){g.source===window&&"process-tick"===g.data&&(g.stopPropagation(),
0<e.length&&e.shift()())},!0);return function(g){e.push(g);window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}();g.title="browser";g.browser=!0;g.env={};g.argv=[];g.binding=function(e){throw Error("process.binding is not supported");};g.cwd=function(){return"/"};g.chdir=function(e){throw Error("process.chdir is not supported");}},{}]},{},[1]);
